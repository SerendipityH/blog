<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>é›…ä¿—å…±èµ</title>
  
  
  <link href="/blog/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/blog/"/>
  <updated>2020-02-19T13:13:50.840Z</updated>
  <id>http://yoursite.com/blog/</id>
  
  <author>
    <name>serendipityh</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>hexoå‘½ä»¤</title>
    <link href="http://yoursite.com/blog/2020/02/19/hexo%E5%91%BD%E4%BB%A4/"/>
    <id>http://yoursite.com/blog/2020/02/19/hexoå‘½ä»¤/</id>
    <published>2020-02-19T09:12:17.000Z</published>
    <updated>2020-02-19T13:13:50.840Z</updated>
    
    <content type="html"><![CDATA[<h1>hexoå‘½ä»¤ï¼ˆè‡ªå·±å¸¸ç”¨çš„å‡ ä¸ªï¼‰</h1><a id="more"></a><p>å¥½ä¹…æ²¡ç”¨å¾ˆå¤šå‘½ä»¤éƒ½å¿˜äº†,ä»Šå¤©è®°ä¸€ä¸‹<br><code>hexo new  "****" </code> # æ–°å»ºæ–‡ç«   ğŸ˜„<br><code>hexo g </code> #ç”Ÿæˆé™æ€é¡µé¢è‡³publicç›®å½•  ğŸ˜„<br><code>hexo s</code>  #å¼€å¯é¢„è§ˆè®¿é—®ç«¯å£ï¼ˆé»˜è®¤ç«¯å£4000ï¼Œ'ctrl + câ€™å…³é—­serverï¼‰ğŸ˜„<br><code>hexo d</code> #éƒ¨ç½²ä¸Šä¼  ğŸ˜„<br><code>hexo clean</code>  #cleanæ¸…ä¸€ä¸‹ğŸ˜„</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;h1&gt;hexoå‘½ä»¤ï¼ˆè‡ªå·±å¸¸ç”¨çš„å‡ ä¸ªï¼‰&lt;/h1&gt;
    
    </summary>
    
      <category term="hexo" scheme="http://yoursite.com/blog/categories/hexo/"/>
    
    
      <category term="hexo" scheme="http://yoursite.com/blog/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>docker æŠ“å–å‡ºé”™</title>
    <link href="http://yoursite.com/blog/2019/08/01/docker-%E6%8A%93%E5%8F%96%E5%87%BA%E9%94%99/"/>
    <id>http://yoursite.com/blog/2019/08/01/docker-æŠ“å–å‡ºé”™/</id>
    <published>2019-08-01T11:47:14.000Z</published>
    <updated>2019-08-01T12:04:16.262Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨ä½¿ç”¨dockerå‘½ä»¤æ—¶å‡ºç°é”™è¯¯ï¼Œä¸€ç›´ä»¥ä¸ºæºæœ‰é—®é¢˜ï¼Œåæ¥æ‰å‘ç°æ˜¯ç½‘ç»œæœ‰é—®é¢˜ã€‚<br><img src="/images/problem/docker.bmp" alt=""><br>ä¿®æ”¹ç½‘ç»œé…ç½®<br><img src="/images/problem/problem1.bmp" alt=""></p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">route add default gw 192.168.31.1</span><br></pre></td></tr></tbody></table></figure><p><img src="/images/problem/problem2.bmp" alt=""></p><p>ç»ˆäºå¥½äº† ï¼ï¼ï¼<br><img src="/images/problem/problem3.bmp" alt=""></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;åœ¨ä½¿ç”¨dockerå‘½ä»¤æ—¶å‡ºç°é”™è¯¯ï¼Œä¸€ç›´ä»¥ä¸ºæºæœ‰é—®é¢˜ï¼Œåæ¥æ‰å‘ç°æ˜¯ç½‘ç»œæœ‰é—®é¢˜ã€‚&lt;br&gt;
&lt;img src=&quot;/images/problem/docker.bmp&quot; alt=&quot;&quot;&gt;&lt;br&gt;
ä¿®æ”¹ç½‘ç»œé…ç½®&lt;br&gt;
&lt;img src=&quot;/images/problem/problem
      
    
    </summary>
    
      <category term="æ—¥å¸¸é—®é¢˜" scheme="http://yoursite.com/blog/categories/%E6%97%A5%E5%B8%B8%E9%97%AE%E9%A2%98/"/>
    
    
      <category term="æ—¥å¸¸é—®é¢˜" scheme="http://yoursite.com/blog/tags/%E6%97%A5%E5%B8%B8%E9%97%AE%E9%A2%98/"/>
    
  </entry>
  
  <entry>
    <title>ä¸Šä¼ jaråŒ…åˆ°mavenç§æœé—®é¢˜</title>
    <link href="http://yoursite.com/blog/2019/07/02/%E4%B8%8A%E4%BC%A0jar%E5%8C%85%E5%88%B0maven%E7%A7%81%E6%9C%8D%E9%97%AE%E9%A2%98/"/>
    <id>http://yoursite.com/blog/2019/07/02/ä¸Šä¼ jaråŒ…åˆ°mavenç§æœé—®é¢˜/</id>
    <published>2019-07-02T10:46:31.000Z</published>
    <updated>2019-07-07T03:06:15.696Z</updated>
    
    <content type="html"><![CDATA[<p>å› ä¸ºç”µè„‘çš„ç³»ç»Ÿæ˜¯win10ï¼Œæ‰€ä»¥ä¿¡æ¯éƒ½è¦åŠ ä¸Š""ã€‚</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;å› ä¸ºç”µè„‘çš„ç³»ç»Ÿæ˜¯win10ï¼Œæ‰€ä»¥ä¿¡æ¯éƒ½è¦åŠ ä¸Š&quot;&quot;ã€‚&lt;/p&gt;
&lt;script&gt;
        document.querySelectorAll(&#39;.github-emoji&#39;)
          .forEach(el =&gt; {
            if (!el.
      
    
    </summary>
    
      <category term="æ—¥å¸¸é—®é¢˜" scheme="http://yoursite.com/blog/categories/%E6%97%A5%E5%B8%B8%E9%97%AE%E9%A2%98/"/>
    
    
      <category term="æ—¥å¸¸é—®é¢˜" scheme="http://yoursite.com/blog/tags/%E6%97%A5%E5%B8%B8%E9%97%AE%E9%A2%98/"/>
    
  </entry>
  
  <entry>
    <title>SpringCloudå­¦ä¹ ï¼ˆ3ï¼‰</title>
    <link href="http://yoursite.com/blog/2019/06/03/SpringCloud%E5%AD%A6%E4%B9%A0%EF%BC%883%EF%BC%89/"/>
    <id>http://yoursite.com/blog/2019/06/03/SpringCloudå­¦ä¹ ï¼ˆ3ï¼‰/</id>
    <published>2019-06-03T12:07:45.000Z</published>
    <updated>2019-06-04T12:09:59.640Z</updated>
    
    <content type="html"><![CDATA[<h1>æ­å»ºé«˜å¯ç”¨Eurekaæ³¨å†Œä¸­å¿ƒï¼ˆEurekaé›†ç¾¤ï¼‰</h1><a id="more"></a><p>åœ¨é¡¹ç›®ä¸­æ·»åŠ å¤šä¸ªé…ç½®æ–‡ä»¶ï¼Œå¹¶ä¸”ä½¿ç”¨SpringBootçš„å¤šç¯å¢ƒé…ç½®æ–¹å¼ã€‚é›†ç¾¤ä¸­éœ€è¦å‡ ä¸ªèŠ‚ç‚¹å°±æ·»åŠ å¤šå°‘é…ç½®æ–‡ä»¶</p><h2 id="eureka1">eureka1</h2><p>application-eureka1.properties</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">spring.application.name=eureka-server</span><br><span class="line">server.port=8761</span><br><span class="line"></span><br><span class="line">#è®¾ç½®eureka å®ä¾‹åç§°ï¼Œä¸é…ç½®æ–‡ä»¶çš„å˜é‡ä¸ºä¸»</span><br><span class="line">eureka.instance.hostname=eureka1</span><br><span class="line">#è®¾ç½®æœåŠ¡æ³¨å†Œä¸­å¿ƒåœ°å€ï¼ŒæŒ‡å‘å¦ä¸€ä¸ªæ³¨å†Œä¸­å¿ƒ</span><br><span class="line">eureka.client.serviceUrl.defaultZone=http://eureka2:8761/eureka/</span><br></pre></td></tr></tbody></table></figure><h2 id="eureka2">eureka2</h2><p>application-eureka2.properties</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">spring.application.name=eureka-server</span><br><span class="line">server.port=8761</span><br><span class="line"></span><br><span class="line">#è®¾ç½®eureka å®ä¾‹åç§°ï¼Œä¸é…ç½®æ–‡ä»¶çš„å˜é‡ä¸ºä¸»</span><br><span class="line">eureka.instance.hostname=eureka2</span><br><span class="line">#è®¾ç½®æœåŠ¡æ³¨å†Œä¸­å¿ƒåœ°å€ï¼ŒæŒ‡å‘å¦ä¸€ä¸ªæ³¨å†Œä¸­å¿ƒ</span><br><span class="line">eureka.client.serviceUrl.defaultZone=http://eureka1:8761/eureka/</span><br></pre></td></tr></tbody></table></figure><h2 id="Eurekaé›†ç¾¤éƒ¨ç½²">Eurekaé›†ç¾¤éƒ¨ç½²</h2><h3 id="é¡¹ç›®æ‰“åŒ…">é¡¹ç›®æ‰“åŒ…</h3><p>å³é”®é¡¹ç›®-&gt;run as -&gt;maven install</p><p>åœ¨/usr/localä¸‹åˆ›å»ºeurekaç›®å½•<br>å°†jarä¸Šä¼ åˆ°è¯¥ç›®å½•</p><h3 id="ç¼–å†™å¯åŠ¨è„šæœ¬">ç¼–å†™å¯åŠ¨è„šæœ¬</h3><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#!/bin/bash</span><br><span class="line"> </span><br><span class="line">cd `dirname $0`</span><br><span class="line"> </span><br><span class="line">CUR_SHELL_DIR=`pwd`</span><br><span class="line">CUR_SHELL_NAME=`basename ${BASH_SOURCE}`</span><br><span class="line"> </span><br><span class="line">JAR_NAME="springcloud-eureka-server-ha-0.0.1-SNAPSHOT.jar"</span><br><span class="line">JAR_PATH=$CUR_SHELL_DIR/$JAR_NAME</span><br><span class="line"> </span><br><span class="line">#JAVA_MEM_OPTS=" -server -Xms1024m -Xmx1024m -XX:PermSize=128m"</span><br><span class="line">JAVA_MEM_OPTS=""</span><br><span class="line"> </span><br><span class="line">SPRING_PROFILES_ACTIV="-Dspring.profiles.active=eureka2"</span><br><span class="line">#SPRING_PROFILES_ACTIV=""</span><br><span class="line">LOG_DIR=$CUR_SHELL_DIR/logs</span><br><span class="line">LOG_PATH=$LOG_DIR/${JAR_NAME%..log</span><br><span class="line"> </span><br><span class="line">echo_help()</span><br><span class="line">{</span><br><span class="line">    echo -e "syntax: sh $CUR_SHELL_NAME start|stop"</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line">if [ -z $1 ];then</span><br><span class="line">    echo_help</span><br><span class="line">    exit 1</span><br><span class="line">fi</span><br><span class="line"> </span><br><span class="line">if [ ! -d "$LOG_DIR" ];then</span><br><span class="line">    mkdir "$LOG_DIR"</span><br><span class="line">fi</span><br><span class="line"> </span><br><span class="line">if [ ! -f "$LOG_PATH" ];then</span><br><span class="line">    touch "$LOG_DIR"</span><br><span class="line">fi</span><br><span class="line"> </span><br><span class="line">if [ "$1" == "start" ];then</span><br><span class="line"> </span><br><span class="line">    # check server</span><br><span class="line">    PIDS=`ps --no-heading -C java -f --width 1000 | grep $JAR_NAME | awk '{print $2}'`</span><br><span class="line">    if [ -n "$PIDS" ]; then</span><br><span class="line">        echo -e "ERROR: The $JAR_NAME already started and the PID is ${PIDS}."</span><br><span class="line">        exit 1</span><br><span class="line">    fi</span><br><span class="line"> </span><br><span class="line">    echo "Starting the $JAR_NAME..."</span><br><span class="line"> </span><br><span class="line">    # start</span><br><span class="line">    nohup java $JAVA_MEM_OPTS -jar $SPRING_PROFILES_ACTIV $JAR_PATH &gt;&gt; $LOG_PATH 2&gt;&amp;1 &amp;</span><br><span class="line"> </span><br><span class="line">    COUNT=0</span><br><span class="line">    while [ $COUNT -lt 1 ]; do</span><br><span class="line">        sleep 1</span><br><span class="line">        COUNT=`ps  --no-heading -C java -f --width 1000 | grep "$JAR_NAME" | awk '{print $2}' | wc -l`</span><br><span class="line">        if [ $COUNT -gt 0 ]; then</span><br><span class="line">            break</span><br><span class="line">        fi</span><br><span class="line">    done</span><br><span class="line">    PIDS=`ps  --no-heading -C java -f --width 1000 | grep "$JAR_NAME" | awk '{print $2}'`</span><br><span class="line">    echo "${JAR_NAME} Started and the PID is ${PIDS}."</span><br><span class="line">    echo "You can check the log file in ${LOG_PATH} for details."</span><br><span class="line"> </span><br><span class="line">elif [ "$1" == "stop" ];then</span><br><span class="line"> </span><br><span class="line">    PIDS=`ps --no-heading -C java -f --width 1000 | grep $JAR_NAME | awk '{print $2}'`</span><br><span class="line">    if [ -z "$PIDS" ]; then</span><br><span class="line">        echo "ERROR:The $JAR_NAME does not started!"</span><br><span class="line">        exit 1</span><br><span class="line">    fi</span><br><span class="line"> </span><br><span class="line">    echo -e "Stopping the $JAR_NAME..."</span><br><span class="line"> </span><br><span class="line">    for PID in $PIDS; do</span><br><span class="line">        kill $PID &gt; /dev/null 2&gt;&amp;1</span><br><span class="line">    done</span><br><span class="line"> </span><br><span class="line">    COUNT=0</span><br><span class="line">    while [ $COUNT -lt 1 ]; do</span><br><span class="line">        sleep 1</span><br><span class="line">        COUNT=1</span><br><span class="line">        for PID in $PIDS ; do</span><br><span class="line">            PID_EXIST=`ps --no-heading -p $PID`</span><br><span class="line">            if [ -n "$PID_EXIST" ]; then</span><br><span class="line">                COUNT=0</span><br><span class="line">                break</span><br><span class="line">            fi</span><br><span class="line">        done</span><br><span class="line">    done</span><br><span class="line"> </span><br><span class="line">    echo -e "${JAR_NAME} Stopped and the PID is ${PIDS}."</span><br><span class="line">else</span><br><span class="line">    echo_help</span><br><span class="line">    exit 1</span><br><span class="line">fi</span><br></pre></td></tr></tbody></table></figure><p>å…¶ä¸­JAR_NAME å’ŒSPRING_PROFILES_ACTIVéœ€è¦ä¿®æ”¹<br>æ·»åŠ å¯åŠ¨æƒé™</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod -R 755 server.sh</span><br></pre></td></tr></tbody></table></figure><h3 id="ä¿®æ”¹linuxçš„hostæ–‡ä»¶">ä¿®æ”¹linuxçš„hostæ–‡ä»¶</h3><p>vim /etc/hosts<br><img src="/images/SpringCloud/SpringCloud2.bmp" alt=""></p><h3 id="å¯åŠ¨è„šæœ¬">å¯åŠ¨è„šæœ¬</h3><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost eureka]# ./server.sh start</span><br></pre></td></tr></tbody></table></figure><h3 id="é€šè¿‡æµè§ˆå™¨è®¿é—®æ³¨å†Œä¸­å¿ƒçš„ç®¡ç†é¡µé¢">é€šè¿‡æµè§ˆå™¨è®¿é—®æ³¨å†Œä¸­å¿ƒçš„ç®¡ç†é¡µé¢</h3><p>192.168.25.128<br><img src="/images/SpringCloud/SpringCloud3.bmp" alt=""><br>192.168.25.129<br><img src="/images/SpringCloud/SpringCloud4.bmp" alt=""></p><h1>åˆ›å»ºprovideræœåŠ¡</h1><h2 id="1-åˆ›å»ºé¡¹ç›®ï¼Œä¿®æ”¹pomæ–‡ä»¶">1.åˆ›å»ºé¡¹ç›®ï¼Œä¿®æ”¹pomæ–‡ä»¶</h2><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><br><span class="line">&lt;project xmlns="http://maven.apache.org/POM/4.0.0"</span><br><span class="line">xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"</span><br><span class="line">xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;</span><br><span class="line">&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;</span><br><span class="line">&lt;parent&gt;</span><br><span class="line">&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;</span><br><span class="line">&lt;version&gt;1.5.13.RELEASE&lt;/version&gt;</span><br><span class="line">&lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt;</span><br><span class="line">&lt;/parent&gt;</span><br><span class="line">&lt;groupId&gt;com.serendipity&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;springcloud-eureka-provider&lt;/artifactId&gt;</span><br><span class="line">&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;</span><br><span class="line">&lt;name&gt;springcloud-eureka-provider&lt;/name&gt;</span><br><span class="line">&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;</span><br><span class="line"></span><br><span class="line">&lt;properties&gt;</span><br><span class="line">&lt;java.version&gt;1.8&lt;/java.version&gt;</span><br><span class="line">&lt;/properties&gt;</span><br><span class="line">&lt;dependencyManagement&gt;</span><br><span class="line">&lt;dependencies&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;</span><br><span class="line">&lt;version&gt;Dalston.SR5&lt;/version&gt;</span><br><span class="line">&lt;type&gt;pom&lt;/type&gt;</span><br><span class="line">&lt;scope&gt;import&lt;/scope&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;/dependencies&gt;</span><br><span class="line">&lt;/dependencyManagement&gt;</span><br><span class="line">&lt;dependencies&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;</span><br><span class="line">&lt;scope&gt;test&lt;/scope&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line"></span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;spring-cloud-starter-config&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;spring-cloud-starter-eureka&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;/dependencies&gt;</span><br><span class="line"></span><br><span class="line">&lt;build&gt;</span><br><span class="line">&lt;plugins&gt;</span><br><span class="line">&lt;plugin&gt;</span><br><span class="line">&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;</span><br><span class="line">&lt;/plugin&gt;</span><br><span class="line">&lt;/plugins&gt;</span><br><span class="line">&lt;/build&gt;</span><br><span class="line"></span><br><span class="line">&lt;/project&gt;</span><br></pre></td></tr></tbody></table></figure><h2 id="2-åœ¨å¯åŠ¨ç±»åŠ ä¸Š-EnableEurekaClientæ³¨è§£">2.åœ¨å¯åŠ¨ç±»åŠ ä¸Š@EnableEurekaClientæ³¨è§£</h2><h2 id="3-ä¿®æ”¹é…ç½®æ–‡ä»¶">3.ä¿®æ”¹é…ç½®æ–‡ä»¶</h2><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">spring.application.name=eureka-provider</span><br><span class="line">server.port=9090</span><br><span class="line"></span><br><span class="line">#è®¾ç½®æœåŠ¡æ³¨å†Œä¸­å¿ƒåœ°å€ï¼ŒæŒ‡å‘å¦ä¸€ä¸ªæ³¨å†Œä¸­å¿ƒ</span><br><span class="line">eureka.client.serviceUrl.defaultZone=http://eureka1:8761/eureka/,http://eureka2:8761/eureka/</span><br></pre></td></tr></tbody></table></figure><h2 id="4-ä¿®æ”¹windows-çš„host-æ–‡ä»¶">4.ä¿®æ”¹windows çš„host æ–‡ä»¶</h2><p><img src="/images/SpringCloud/SpringCloud5.bmp" alt=""></p><h2 id="5-ç¼–å†™pojo">5.ç¼–å†™pojo</h2><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">public class User {</span><br><span class="line">    private Integer userid;</span><br><span class="line">    private String username;</span><br><span class="line">    private Integer userage;</span><br><span class="line"></span><br><span class="line">    public Integer getUserid() {</span><br><span class="line">        return userid;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public void setUserid(Integer userid) {</span><br><span class="line">        this.userid = userid;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public String getUsername() {</span><br><span class="line">        return username;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public void setUsername(String username) {</span><br><span class="line">        this.username = username;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public Integer getUserage() {</span><br><span class="line">        return userage;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public void setUserage(Integer userage) {</span><br><span class="line">        this.userage = userage;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public User(Integer userid, String username, Integer userage) {</span><br><span class="line">        super();</span><br><span class="line">        this.userid = userid;</span><br><span class="line">        this.username = username;</span><br><span class="line">        this.userage = userage;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public User() {</span><br><span class="line">        super();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="6-ç¼–å†™æœåŠ¡æ¥å£">6.ç¼–å†™æœåŠ¡æ¥å£</h2><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">@RestController</span><br><span class="line">public class UsersController {</span><br><span class="line">    </span><br><span class="line">    @RequestMapping("/user")</span><br><span class="line">    public List&lt;User&gt; getUsers() {</span><br><span class="line">        List&lt;User&gt; list = new ArrayList&lt;&gt;();</span><br><span class="line">        list.add(new User(1, "zhangsan", 20));</span><br><span class="line">        list.add(new User(2, "lisi", 10));</span><br><span class="line">        list.add(new User(3, "wangwu", 30));</span><br><span class="line">        return list;</span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="7-é€šè¿‡æµè§ˆå™¨è®¿é—®">7.é€šè¿‡æµè§ˆå™¨è®¿é—®</h2><p>è¿™æ—¶å·²ç»å°†æœåŠ¡æ³¨å†Œåˆ°Eureka<br><img src="/images/SpringCloud/SpringCloud6.bmp" alt=""></p><h1>åœ¨é«˜å¯ç”¨çš„Eureka æ³¨å†Œä¸­å¿ƒä¸­æ„å»ºconsumer æœåŠ¡</h1><h2 id="Consumerçš„é…ç½®æ–‡ä»¶">Consumerçš„é…ç½®æ–‡ä»¶</h2><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">spring.application.name=eureka-consumer</span><br><span class="line">server.port=9091</span><br><span class="line"></span><br><span class="line">#è®¾ç½®æœåŠ¡æ³¨å†Œä¸­å¿ƒåœ°å€ï¼ŒæŒ‡å‘å¦ä¸€ä¸ªæ³¨å†Œä¸­å¿ƒ</span><br><span class="line">eureka.client.serviceUrl.defaultZone=http://eureka1:8761/eureka/,http://eureka2:8761/eureka/</span><br></pre></td></tr></tbody></table></figure><h2 id="åœ¨Service-ä¸­å®ŒæˆæœåŠ¡çš„è°ƒç”¨">åœ¨Service ä¸­å®ŒæˆæœåŠ¡çš„è°ƒç”¨</h2><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">@Service</span><br><span class="line">public class UserService {</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    private LoadBalancerClient loadBalancerClient; // è´Ÿè½½å‡è¡¡</span><br><span class="line"></span><br><span class="line">    public List&lt;User&gt; getUsers() {</span><br><span class="line">        // é€‰æ‹©è°ƒç”¨æœåŠ¡çš„åç§°</span><br><span class="line">        // ServiceInstance å°è£…äº†æœåŠ¡çš„åŸºæœ¬ä¿¡æ¯ï¼Œå¦‚IPã€ç«¯å£</span><br><span class="line">        ServiceInstance sInstance = loadBalancerClient.choose("eureka-provider");</span><br><span class="line">        // æ‹¼æ¥è®¿é—®æœåŠ¡çš„URL</span><br><span class="line">        StringBuffer sb = new StringBuffer();</span><br><span class="line">        sb.append("http://").append(sInstance.getHost()).append(":").append(sInstance.getPort())</span><br><span class="line">                .append("/user");</span><br><span class="line"></span><br><span class="line">        // springMVC RestTemplate</span><br><span class="line">        RestTemplate rTemplate = new RestTemplate();</span><br><span class="line">        ParameterizedTypeReference&lt;List&lt;User&gt;&gt; type =</span><br><span class="line">                new ParameterizedTypeReference&lt;List&lt;User&gt;&gt;() {};</span><br><span class="line">        // å°è£…äº†è¿”å›å€¼ä¿¡æ¯</span><br><span class="line">        ResponseEntity&lt;List&lt;User&gt;&gt; responseEntity =</span><br><span class="line">                rTemplate.exchange(sb.toString(), HttpMethod.GET, null, type);</span><br><span class="line"></span><br><span class="line">        List&lt;User&gt; list = responseEntity.getBody();</span><br><span class="line">        return list;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="ç¼–å†™controller">ç¼–å†™controller</h2><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">@RestController</span><br><span class="line">public class UsersController {</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    private UserService userService;</span><br><span class="line"></span><br><span class="line">    @RequestMapping("/consumer")</span><br><span class="line">    public List&lt;User&gt; getUsers() {</span><br><span class="line"></span><br><span class="line">        return userService.getUsers();</span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="å¯åŠ¨è®¿é—®">å¯åŠ¨è®¿é—®</h2><p><img src="/images/SpringCloud/SpringCloud7.bmp" alt=""></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;h1&gt;æ­å»ºé«˜å¯ç”¨Eurekaæ³¨å†Œä¸­å¿ƒï¼ˆEurekaé›†ç¾¤ï¼‰&lt;/h1&gt;
    
    </summary>
    
      <category term="SpringCloud" scheme="http://yoursite.com/blog/categories/SpringCloud/"/>
    
    
      <category term="SpringCloud" scheme="http://yoursite.com/blog/tags/SpringCloud/"/>
    
  </entry>
  
  <entry>
    <title>SpringCloud å­¦ä¹ ï¼ˆ2ï¼‰</title>
    <link href="http://yoursite.com/blog/2019/06/02/SpringCloud-%E5%AD%A6%E4%B9%A0%EF%BC%882%EF%BC%89/"/>
    <id>http://yoursite.com/blog/2019/06/02/SpringCloud-å­¦ä¹ ï¼ˆ2ï¼‰/</id>
    <published>2019-06-02T14:38:26.000Z</published>
    <updated>2019-06-03T12:13:13.534Z</updated>
    
    <content type="html"><![CDATA[<h1>Eureka æœåŠ¡æ³¨å†Œä¸­å¿ƒ</h1><a id="more"></a><h2 id="ä»€ä¹ˆæœåŠ¡æ³¨å†Œä¸­å¿ƒ">ä»€ä¹ˆæœåŠ¡æ³¨å†Œä¸­å¿ƒ</h2><p>æœåŠ¡æ³¨å†Œä¸­å¿ƒæ˜¯æœåŠ¡å®ç°æœåŠ¡åŒ–ç®¡ç†çš„æ ¸å¿ƒç»„ä»¶,ç±»ä¼¼äºç›®å½•æœåŠ¡çš„ä½œç”¨,ä¸»è¦ç”¨æ¥å­˜å‚¨æœåŠ¡ä¿¡æ¯ï¼Œè­¬å¦‚æä¾›è€…url ä¸²ã€è·¯ç”±ä¿¡æ¯ç­‰ã€‚æœåŠ¡æ³¨å†Œä¸­å¿ƒæ˜¯SOA æ¶æ„ä¸­æœ€åŸºç¡€çš„è®¾æ–½ä¹‹ä¸€ã€‚</p><h3 id="1-ä»€ä¹ˆæ˜¯Eurekaæ³¨å†Œä¸­å¿ƒ">1.ä»€ä¹ˆæ˜¯Eurekaæ³¨å†Œä¸­å¿ƒ</h3><p>Eureka æ˜¯Netflix å¼€å‘çš„æœåŠ¡å‘ç°ç»„ä»¶ï¼Œæœ¬èº«æ˜¯ä¸€ä¸ªåŸºäºREST çš„æœåŠ¡ã€‚Spring Cloudå°†å®ƒé›†æˆåœ¨å…¶å­é¡¹ç›®spring-cloud-netflix ä¸­ï¼Œä»¥å®ç°Spring Cloud çš„æœåŠ¡æ³¨å†Œäºå‘ç°ï¼ŒåŒæ—¶è¿˜æä¾›äº†è´Ÿè½½å‡è¡¡ã€æ•…éšœè½¬ç§»ç­‰èƒ½åŠ›ã€‚</p><h3 id="2-Eurekaæ³¨å†Œä¸­å¿ƒä¸‰ç§è§’è‰²">2.Eurekaæ³¨å†Œä¸­å¿ƒä¸‰ç§è§’è‰²</h3><h4 id="Eureka-Server">Eureka Server</h4><p>é€šè¿‡Registerã€Getã€Renew ç­‰æ¥å£æä¾›æœåŠ¡çš„æ³¨å†Œå’Œå‘ç°ã€‚</p><h4 id="Application-Service-Service-Provider">Application Service (Service Provider)</h4><p>æœåŠ¡æä¾›æ–¹<br>æŠŠè‡ªèº«çš„æœåŠ¡å®ä¾‹æ³¨å†Œåˆ°Eureka Server ä¸­</p><h4 id="Application-Client-Service-Consumer">Application Client (Service Consumer)</h4><p>æœåŠ¡è°ƒç”¨æ–¹<br>é€šè¿‡Eureka Server è·å–æœåŠ¡åˆ—è¡¨ï¼Œæ¶ˆè´¹æœåŠ¡ã€‚</p><h2 id="Eurekaå…¥é—¨æ¡ˆä¾‹">Eurekaå…¥é—¨æ¡ˆä¾‹</h2><h3 id="åˆ›å»ºmavené¡¹ç›®ï¼Œåœ¨pomæ–‡ä»¶ä¸­æ·»åŠ ä¾èµ–">åˆ›å»ºmavené¡¹ç›®ï¼Œåœ¨pomæ–‡ä»¶ä¸­æ·»åŠ ä¾èµ–</h3><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><br><span class="line">&lt;project xmlns="http://maven.apache.org/POM/4.0.0"</span><br><span class="line">xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"</span><br><span class="line">xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;</span><br><span class="line">&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;</span><br><span class="line">&lt;parent&gt;</span><br><span class="line">&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;</span><br><span class="line">&lt;version&gt;1.5.13.RELEASE&lt;/version&gt;</span><br><span class="line">&lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt;</span><br><span class="line">&lt;/parent&gt;</span><br><span class="line">&lt;groupId&gt;com.serendipity&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;springcloud-eureka-server&lt;/artifactId&gt;</span><br><span class="line">&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;</span><br><span class="line">&lt;name&gt;springcloud-eureka-server&lt;/name&gt;</span><br><span class="line">&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;</span><br><span class="line"></span><br><span class="line">&lt;properties&gt;</span><br><span class="line">&lt;java.version&gt;1.8&lt;/java.version&gt;</span><br><span class="line">&lt;/properties&gt;</span><br><span class="line">&lt;dependencyManagement&gt;</span><br><span class="line">&lt;dependencies&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;</span><br><span class="line">&lt;version&gt;Dalston.SR5&lt;/version&gt;</span><br><span class="line">&lt;type&gt;pom&lt;/type&gt;</span><br><span class="line">&lt;scope&gt;import&lt;/scope&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;/dependencies&gt;</span><br><span class="line">&lt;/dependencyManagement&gt;</span><br><span class="line">&lt;dependencies&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;</span><br><span class="line">&lt;scope&gt;test&lt;/scope&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line"></span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;spring-cloud-starter-config&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;spring-cloud-starter-eureka-server&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;/dependencies&gt;</span><br><span class="line"></span><br><span class="line">&lt;build&gt;</span><br><span class="line">&lt;plugins&gt;</span><br><span class="line">&lt;plugin&gt;</span><br><span class="line">&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;</span><br><span class="line">&lt;/plugin&gt;</span><br><span class="line">&lt;/plugins&gt;</span><br><span class="line">&lt;/build&gt;</span><br><span class="line">&lt;/project&gt;</span><br></pre></td></tr></tbody></table></figure><h3 id="åœ¨å¯åŠ¨ç±»ä¸Šæ·»åŠ æ³¨è§£">åœ¨å¯åŠ¨ç±»ä¸Šæ·»åŠ æ³¨è§£</h3><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@EnableEurekaServer</span><br><span class="line">@SpringBootApplication</span><br><span class="line">public class EurekaApplication {</span><br><span class="line">public static void main(String[] args) {</span><br><span class="line">SpringApplication.run(EurekaApplication.class, args);</span><br><span class="line">}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="ä¿®æ”¹application-propertieså…¨å±€é…ç½®æ–‡ä»¶">ä¿®æ”¹application.propertieså…¨å±€é…ç½®æ–‡ä»¶</h3><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">spring.application.name=eureka-server</span><br><span class="line">server.port=8761</span><br><span class="line"></span><br><span class="line">#æ˜¯å¦å°†è‡ªå·±æ³¨å†Œåˆ°Eureka-Server,é»˜è®¤ä¸ºtrue</span><br><span class="line">eureka.client.registerWithEureka=false</span><br><span class="line"></span><br><span class="line">#æ˜¯å¦ä»Eureka-Serverä¸­è·å–æœåŠ¡æ³¨å†Œä¿¡æ¯,é»˜è®¤ä¸ºtrue</span><br><span class="line">eureka.client.fetchRegistry=false</span><br></pre></td></tr></tbody></table></figure><p>å¦‚æœä¸è®¾ä¸ºfalse,ä¼šåœ¨å¯åŠ¨çš„æ—¶å€™æŠ¥é”™</p><h3 id="é€šè¿‡æµè§ˆå™¨è®¿é—®Eureka-Server-æœåŠ¡ç®¡ç†å¹³å°">é€šè¿‡æµè§ˆå™¨è®¿é—®Eureka-Server æœåŠ¡ç®¡ç†å¹³å°</h3><p><img src="/images/SpringCloud/SpringCloud1.bmp" alt=""></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;h1&gt;Eureka æœåŠ¡æ³¨å†Œä¸­å¿ƒ&lt;/h1&gt;
    
    </summary>
    
      <category term="SpringCloud" scheme="http://yoursite.com/blog/categories/SpringCloud/"/>
    
    
      <category term="SpringCloud" scheme="http://yoursite.com/blog/tags/SpringCloud/"/>
    
  </entry>
  
  <entry>
    <title>SpringBootå­¦ä¹ ï¼ˆ11ï¼‰</title>
    <link href="http://yoursite.com/blog/2019/05/30/SpringBoot%E5%AD%A6%E4%B9%A0%EF%BC%8811%EF%BC%89/"/>
    <id>http://yoursite.com/blog/2019/05/30/SpringBootå­¦ä¹ ï¼ˆ11ï¼‰/</id>
    <published>2019-05-30T13:56:44.000Z</published>
    <updated>2019-05-30T14:25:48.355Z</updated>
    
    <content type="html"><![CDATA[<h1>SpringBoot å…¨å±€é…ç½®æ–‡ä»¶è®²è§£</h1><a id="more"></a><h2 id="1-ä¿®æ”¹å†…åµŒå®¹å™¨çš„ç«¯å£å·">1.ä¿®æ”¹å†…åµŒå®¹å™¨çš„ç«¯å£å·</h2><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">server.port=8888</span><br></pre></td></tr></tbody></table></figure><h2 id="2-è‡ªå®šä¹‰å±æ€§é…ç½®">2.è‡ªå®šä¹‰å±æ€§é…ç½®</h2><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msg=Hello World</span><br></pre></td></tr></tbody></table></figure><p>è·å–</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@Value("${msg}")</span><br><span class="line">private String msg;</span><br></pre></td></tr></tbody></table></figure><h2 id="3-é…ç½®å˜é‡å¼•ç”¨">3.é…ç½®å˜é‡å¼•ç”¨</h2><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hello=apple</span><br><span class="line"></span><br><span class="line">msg=Hello World ${hello}</span><br></pre></td></tr></tbody></table></figure><p>é¡µé¢æ˜¾ç¤º<br><img src="/images/SpringBoot/SpringBoot17.bmp" alt=""></p><h2 id="4-éšæœºå€¼é…ç½®">4.éšæœºå€¼é…ç½®</h2><h3 id="éšæœºå€¼">éšæœºå€¼</h3><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">num=${random.int}</span><br></pre></td></tr></tbody></table></figure><p>ç”¨å¤„ï¼šé…ç½®éšæœºå€¼ï¼Œåœ¨ç¨‹åºä¸­å¦‚æœæœ‰ä¸€äº›è¿ç®—éœ€è¦ä¸€ä¸ªéšæœºå€¼ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨è¯¥æ–¹å¼æ¥<br>ç”Ÿæˆã€‚æ³¨æ„ï¼Œåªç”Ÿæˆä¸€æ¬¡ã€‚</p><h3 id="éšæœºç«¯å£">éšæœºç«¯å£</h3><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">server.port=${random.int[1024,9999]}</span><br></pre></td></tr></tbody></table></figure><p>ç”¨å¤„ï¼šåœ¨SpringCloud çš„å¾®æœåŠ¡ä¸­ï¼Œæˆ‘ä»¬æ˜¯ä¸éœ€è¦è®°å½•IP ä¸ç«¯å£å·çš„ã€‚é‚£ä¹ˆæˆ‘ä»¬ä¹Ÿå°±ä¸<br>éœ€è¦å»ç»´æŠ¤æœåŠ¡çš„ç«¯å£å·ã€‚è®©ä»–éšæœºç”Ÿæˆå°±å¯ä»¥äº†ã€‚</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;h1&gt;SpringBoot å…¨å±€é…ç½®æ–‡ä»¶è®²è§£&lt;/h1&gt;
    
    </summary>
    
      <category term="SpringBoot" scheme="http://yoursite.com/blog/categories/SpringBoot/"/>
    
    
      <category term="SpringBoot" scheme="http://yoursite.com/blog/tags/SpringBoot/"/>
    
  </entry>
  
  <entry>
    <title>SpringCloud å­¦ä¹ ï¼ˆ1ï¼‰ </title>
    <link href="http://yoursite.com/blog/2019/05/29/SpringCloud-%E5%AD%A6%E4%B9%A0%EF%BC%881%EF%BC%89/"/>
    <id>http://yoursite.com/blog/2019/05/29/SpringCloud-å­¦ä¹ ï¼ˆ1ï¼‰/</id>
    <published>2019-05-29T12:29:45.000Z</published>
    <updated>2019-05-29T14:28:53.473Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1-æ¦‚å¿µå®šä¹‰">1.æ¦‚å¿µå®šä¹‰</h2><p>SpringCloudæ˜¯ä¸€ä¸ªå¾®æœåŠ¡æ¡†æ¶ï¼Œç›¸æ¯”Dubboç­‰RPCæ¡†æ¶,<strong>SpringCloudæä¾›äº†å…¨å¥—çš„åˆ†å¸ƒå¼ç³»ç»Ÿè§£å†³æ–¹æ¡ˆ</strong>ã€‚<br>ã€€ã€€Spring Cloud å¯¹å¾®æœåŠ¡åŸºç¡€æ¡†æ¶Netflix çš„å¤šä¸ªå¼€æºç»„ä»¶è¿›è¡Œäº†å°è£…ï¼ŒåŒæ—¶åˆå®ç°äº†å’Œäº‘ç«¯å¹³å°ä»¥åŠå’ŒSpring Boot å¼€å‘æ¡†æ¶çš„é›†æˆã€‚<br>ã€€ã€€Spring Cloud ä¸ºå¾®æœåŠ¡æ¶æ„å¼€å‘æ¶‰åŠçš„__é…ç½®ç®¡ç†ï¼ŒæœåŠ¡æ²»ç†ï¼Œç†”æ–­æœºåˆ¶ï¼Œæ™ºèƒ½è·¯ç”±ï¼Œå¾®ä»£ç†ï¼Œæ§åˆ¶æ€»çº¿ï¼Œä¸€æ¬¡æ€§tokenï¼Œå…¨å±€ä¸€è‡´æ€§é”ï¼Œleader é€‰ä¸¾ï¼Œåˆ†å¸ƒå¼sessionï¼Œé›†ç¾¤çŠ¶æ€__ç®¡ç†ç­‰æ“ä½œæä¾›äº†ä¸€ç§ç®€å•çš„å¼€å‘æ–¹å¼ã€‚<br>ã€€ã€€Spring Cloud ä¸ºå¼€å‘è€…æä¾›äº†å¿«é€Ÿæ„å»ºåˆ†å¸ƒå¼ç³»ç»Ÿçš„å·¥å…·ï¼Œå¼€å‘è€…å¯ä»¥å¿«é€Ÿçš„å¯åŠ¨æœåŠ¡æˆ–æ„å»ºåº”ç”¨ã€åŒæ—¶èƒ½å¤Ÿå¿«é€Ÿå’Œäº‘å¹³å°èµ„æºè¿›è¡Œå¯¹æ¥ã€‚</p><h2 id="2-Spring-Cloud-çš„å­é¡¹ç›®">2.Spring Cloud çš„å­é¡¹ç›®</h2><p>Spring Cloud åŒ…å«äº†å¾ˆå¤šå­é¡¹ç›®ï¼Œå¦‚ï¼š</p><h3 id="2-1Spring-Cloud-Configï¼šé…ç½®ç®¡ç†å·¥å…·ï¼Œæ”¯æŒä½¿ç”¨Git-å­˜å‚¨é…ç½®å†…å®¹ï¼Œæ”¯æŒåº”">2.1Spring Cloud Configï¼šé…ç½®ç®¡ç†å·¥å…·ï¼Œæ”¯æŒä½¿ç”¨Git å­˜å‚¨é…ç½®å†…å®¹ï¼Œæ”¯æŒåº”</h3><p>ç”¨é…ç½®çš„å¤–éƒ¨åŒ–å­˜å‚¨ï¼Œæ”¯æŒå®¢æˆ·ç«¯é…ç½®ä¿¡æ¯åˆ·æ–°ã€åŠ è§£å¯†é…ç½®å†…å®¹ç­‰</p><h3 id="2-2-Spring-Cloud-Busï¼šäº‹ä»¶ã€æ¶ˆæ¯æ€»çº¿ï¼Œç”¨äºåœ¨é›†ç¾¤ï¼ˆä¾‹å¦‚ï¼Œé…ç½®å˜åŒ–äº‹ä»¶ï¼‰ä¸­">2.2 Spring Cloud Busï¼šäº‹ä»¶ã€æ¶ˆæ¯æ€»çº¿ï¼Œç”¨äºåœ¨é›†ç¾¤ï¼ˆä¾‹å¦‚ï¼Œé…ç½®å˜åŒ–äº‹ä»¶ï¼‰ä¸­</h3><p>ä¼ æ’­çŠ¶æ€å˜åŒ–ï¼Œå¯ä¸Spring Cloud Config è”åˆå®ç°çƒ­éƒ¨ç½²ã€‚</p><h3 id="2-3Spring-Cloud-Netflixï¼šé’ˆå¯¹å¤šç§Netflix-ç»„ä»¶æä¾›çš„å¼€å‘å·¥å…·åŒ…ï¼Œå…¶ä¸­åŒ…æ‹¬">2.3Spring Cloud Netflixï¼šé’ˆå¯¹å¤šç§Netflix ç»„ä»¶æä¾›çš„å¼€å‘å·¥å…·åŒ…ï¼Œå…¶ä¸­åŒ…æ‹¬</h3><p>Eurekaã€Hystrixã€Zuulã€Archaius ç­‰ã€‚</p><h4 id="2-3-1Netflix-Eurekaï¼šä¸€ä¸ªåŸºäºrest-æœåŠ¡çš„æœåŠ¡æ²»ç†ç»„ä»¶ï¼ŒåŒ…æ‹¬æœåŠ¡æ³¨å†Œä¸­">2.3.1Netflix Eurekaï¼šä¸€ä¸ªåŸºäºrest æœåŠ¡çš„æœåŠ¡æ²»ç†ç»„ä»¶ï¼ŒåŒ…æ‹¬æœåŠ¡æ³¨å†Œä¸­</h4><p>å¿ƒã€æœåŠ¡æ³¨å†Œä¸æœåŠ¡å‘ç°æœºåˆ¶çš„å®ç°ï¼Œå®ç°äº†äº‘ç«¯è´Ÿè½½å‡è¡¡å’Œä¸­é—´å±‚æœåŠ¡å™¨<br>çš„æ•…éšœè½¬ç§»ã€‚</p><h4 id="2-3-2Netflix-Hystrixï¼šå®¹é”™ç®¡ç†å·¥å…·ï¼Œå®ç°æ–­è·¯å™¨æ¨¡å¼ï¼Œé€šè¿‡æ§åˆ¶æœåŠ¡çš„èŠ‚ç‚¹-ä»è€Œå¯¹å»¶è¿Ÿå’Œæ•…éšœæä¾›æ›´å¼ºå¤§çš„å®¹é”™èƒ½åŠ›ã€‚">2.3.2Netflix Hystrixï¼šå®¹é”™ç®¡ç†å·¥å…·ï¼Œå®ç°æ–­è·¯å™¨æ¨¡å¼ï¼Œé€šè¿‡æ§åˆ¶æœåŠ¡çš„èŠ‚ç‚¹,ä»è€Œå¯¹å»¶è¿Ÿå’Œæ•…éšœæä¾›æ›´å¼ºå¤§çš„å®¹é”™èƒ½åŠ›ã€‚</h4><h4 id="2-3-3Netflix-Ribbonï¼šå®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡çš„æœåŠ¡è°ƒç”¨ç»„ä»¶ã€‚">2.3.3Netflix Ribbonï¼šå®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡çš„æœåŠ¡è°ƒç”¨ç»„ä»¶ã€‚</h4><h4 id="2-3-4Netflix-Feignï¼šåŸºäºRibbon-å’ŒHystrix-çš„å£°æ˜å¼æœåŠ¡è°ƒç”¨ç»„ä»¶ã€‚">2.3.4Netflix Feignï¼šåŸºäºRibbon å’ŒHystrix çš„å£°æ˜å¼æœåŠ¡è°ƒç”¨ç»„ä»¶ã€‚</h4><h4 id="2-3-5Netflix-Zuulï¼šå¾®æœåŠ¡ç½‘å…³ï¼Œæä¾›åŠ¨æ€è·¯ç”±ï¼Œè®¿é—®è¿‡æ»¤ç­‰æœåŠ¡ã€‚">2.3.5Netflix Zuulï¼šå¾®æœåŠ¡ç½‘å…³ï¼Œæä¾›åŠ¨æ€è·¯ç”±ï¼Œè®¿é—®è¿‡æ»¤ç­‰æœåŠ¡ã€‚</h4><h4 id="2-3-6Netflix-Archaiusï¼šé…ç½®ç®¡ç†APIï¼ŒåŒ…å«ä¸€ç³»åˆ—é…ç½®ç®¡ç†APIï¼Œæä¾›åŠ¨æ€ç±»å‹åŒ–å±æ€§ã€çº¿ç¨‹å®‰å…¨é…ç½®æ“ä½œã€è½®è¯¢æ¡†æ¶ã€å›è°ƒæœºåˆ¶ç­‰åŠŸèƒ½ã€‚">2.3.6Netflix Archaiusï¼šé…ç½®ç®¡ç†APIï¼ŒåŒ…å«ä¸€ç³»åˆ—é…ç½®ç®¡ç†APIï¼Œæä¾›åŠ¨æ€ç±»å‹åŒ–å±æ€§ã€çº¿ç¨‹å®‰å…¨é…ç½®æ“ä½œã€è½®è¯¢æ¡†æ¶ã€å›è°ƒæœºåˆ¶ç­‰åŠŸèƒ½ã€‚</h4><h3 id="2-4Spring-Cloud-for-Cloud-Foundry-ï¼š-é€šè¿‡Oauth2-åè®®ç»‘å®šæœåŠ¡åˆ°">2.4Spring Cloud for Cloud Foundry ï¼š é€šè¿‡Oauth2 åè®®ç»‘å®šæœåŠ¡åˆ°</h3><p>CloudFoundryï¼ŒCloudFoundry æ˜¯VMware æ¨å‡ºçš„å¼€æºPaaS äº‘å¹³å°ã€‚</p><h3 id="2-5Spring-Cloud-Sleuthï¼šæ—¥å¿—æ”¶é›†å·¥å…·åŒ…ï¼Œå°è£…äº†Dapper-Zipkin-å’ŒHTrace">2.5Spring Cloud Sleuthï¼šæ—¥å¿—æ”¶é›†å·¥å…·åŒ…ï¼Œå°è£…äº†Dapper,Zipkin å’ŒHTrace</h3><p>æ“ä½œã€‚</p><h3 id="2-6Spring-Cloud-Data-Flowï¼šå¤§æ•°æ®æ“ä½œå·¥å…·ï¼Œé€šè¿‡å‘½ä»¤è¡Œæ–¹å¼æ“ä½œæ•°æ®æµã€‚">2.6Spring Cloud Data Flowï¼šå¤§æ•°æ®æ“ä½œå·¥å…·ï¼Œé€šè¿‡å‘½ä»¤è¡Œæ–¹å¼æ“ä½œæ•°æ®æµã€‚</h3><h3 id="2-7Spring-Cloud-Securityï¼šå®‰å…¨å·¥å…·åŒ…ï¼Œä¸ºä½ çš„åº”ç”¨ç¨‹åºæ·»åŠ å®‰å…¨æ§åˆ¶ï¼Œä¸»è¦">2.7Spring Cloud Securityï¼šå®‰å…¨å·¥å…·åŒ…ï¼Œä¸ºä½ çš„åº”ç”¨ç¨‹åºæ·»åŠ å®‰å…¨æ§åˆ¶ï¼Œä¸»è¦</h3><p>æ˜¯æŒ‡OAuth2ã€‚</p><h3 id="2-8Spring-Cloud-Consulï¼šå°è£…äº†Consul-æ“ä½œï¼Œconsul-æ˜¯ä¸€ä¸ªæœåŠ¡å‘ç°ä¸é…">2.8Spring Cloud Consulï¼šå°è£…äº†Consul æ“ä½œï¼Œconsul æ˜¯ä¸€ä¸ªæœåŠ¡å‘ç°ä¸é…</h3><p>ç½®å·¥å…·ï¼Œä¸Docker å®¹å™¨å¯ä»¥æ— ç¼é›†æˆã€‚</p><h3 id="2-9Spring-Cloud-Zookeeper-ï¼š-æ“ä½œZookeeper-çš„å·¥å…·åŒ…ï¼Œ-ç”¨äºä½¿ç”¨">2.9Spring Cloud Zookeeper ï¼š æ“ä½œZookeeper çš„å·¥å…·åŒ…ï¼Œ ç”¨äºä½¿ç”¨</h3><p>zookeeper æ–¹å¼çš„æœåŠ¡æ³¨å†Œå’Œå‘ç°ã€‚</p><h3 id="2-10Spring-Cloud-Streamï¼šæ•°æ®æµæ“ä½œå¼€å‘åŒ…ï¼Œå°è£…äº†ä¸Redis-Rabbitã€">2.10Spring Cloud Streamï¼šæ•°æ®æµæ“ä½œå¼€å‘åŒ…ï¼Œå°è£…äº†ä¸Redis,Rabbitã€</h3><p>Kafka ç­‰å‘é€æ¥æ”¶æ¶ˆæ¯ã€‚</p><h3 id="2-11Spring-Cloud-CLIï¼šåŸºäºSpring-Boot-CLIï¼Œå¯ä»¥è®©ä½ ä»¥å‘½ä»¤è¡Œæ–¹å¼å¿«é€Ÿ">2.11Spring Cloud CLIï¼šåŸºäºSpring Boot CLIï¼Œå¯ä»¥è®©ä½ ä»¥å‘½ä»¤è¡Œæ–¹å¼å¿«é€Ÿ</h3><p>å»ºç«‹äº‘ç»„ä»¶ã€‚</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;1-æ¦‚å¿µå®šä¹‰&quot;&gt;1.æ¦‚å¿µå®šä¹‰&lt;/h2&gt;
&lt;p&gt;SpringCloudæ˜¯ä¸€ä¸ªå¾®æœåŠ¡æ¡†æ¶ï¼Œç›¸æ¯”Dubboç­‰RPCæ¡†æ¶,&lt;strong&gt;SpringCloudæä¾›äº†å…¨å¥—çš„åˆ†å¸ƒå¼ç³»ç»Ÿè§£å†³æ–¹æ¡ˆ&lt;/strong&gt;ã€‚&lt;br&gt;
ã€€ã€€Spring Cloud å¯¹å¾®æœåŠ¡åŸºç¡€æ¡†æ¶Net
      
    
    </summary>
    
      <category term="SpringCloud" scheme="http://yoursite.com/blog/categories/SpringCloud/"/>
    
    
      <category term="SpringCloud" scheme="http://yoursite.com/blog/tags/SpringCloud/"/>
    
  </entry>
  
  <entry>
    <title>SpringBoot å­¦ä¹ ï¼ˆ10ï¼‰</title>
    <link href="http://yoursite.com/blog/2019/05/28/SpringBoot%E5%AD%A6%E4%B9%A0%20%20(10)/"/>
    <id>http://yoursite.com/blog/2019/05/28/SpringBootå­¦ä¹   (10)/</id>
    <published>2019-05-28T12:25:06.000Z</published>
    <updated>2019-05-28T13:45:54.315Z</updated>
    
    <content type="html"><![CDATA[<h2 id="SpringBootå®šæ—¶ä»»åŠ¡">SpringBootå®šæ—¶ä»»åŠ¡</h2><a id="more"></a><h2 id="Scheduledå®šæ—¶ä»»åŠ¡å™¨">Scheduledå®šæ—¶ä»»åŠ¡å™¨</h2><p>scheduledå®šæ—¶ä»»åŠ¡å™¨ï¼šæ˜¯Spring3.0ä»¥åè‡ªå¸¦çš„ä¸€ä¸ªå®šæ—¶ä»»åŠ¡å™¨</p><h3 id="æ·»åŠ å®šæ—¶Scheduledåæ ‡">æ·»åŠ å®šæ—¶Scheduledåæ ‡</h3><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- æ·»åŠ Scheduledåæ ‡ --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;org.springframework&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;spring-context-support&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></tbody></table></figure><h3 id="ç¼–å†™å®šæ—¶ä»»åŠ¡ç±»">ç¼–å†™å®šæ—¶ä»»åŠ¡ç±»</h3><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * Scheduledå®šæ—¶ä»»åŠ¡</span><br><span class="line"> */</span><br><span class="line">@Component</span><br><span class="line">public class ScheduledDemo {</span><br><span class="line">    /**</span><br><span class="line">         * å®šæ—¶ä»»åŠ¡æ–¹æ³•</span><br><span class="line">     *cronå±æ€§ï¼šcronè¡¨è¾¾å¼ï¼Œå®šæ—¶ä»»åŠ¡è§¦å‘æ˜¯æ—¶é—´çš„ä¸€ä¸ªå­—ç¬¦ä¸²è¡¨è¾¾å½¢å¼</span><br><span class="line">     */</span><br><span class="line">    @Scheduled(cron="0/2 * * * * ?")</span><br><span class="line">    public void scheduledMethod() {</span><br><span class="line">        System.out.println("å®šæ—¶ä»»åŠ¡å™¨è§¦å‘:"+new Date());</span><br><span class="line">        </span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="åœ¨å¯åŠ¨ç±»ä¸­æ·»åŠ å®šæ—¶ä»»åŠ¡çš„ä½¿ç”¨">åœ¨å¯åŠ¨ç±»ä¸­æ·»åŠ å®šæ—¶ä»»åŠ¡çš„ä½¿ç”¨</h3><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">@SpringBootApplication</span><br><span class="line">@EnableScheduling</span><br><span class="line">public class App {</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) {</span><br><span class="line">        // TODO Auto-generated method stub</span><br><span class="line">        SpringApplication.run(App.class, args);</span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="SpringBootæ•´åˆQuartzå®šæ—¶ä»»åŠ¡æ¡†æ¶">SpringBootæ•´åˆQuartzå®šæ—¶ä»»åŠ¡æ¡†æ¶</h2><p>ç¼–å†™Quartzçš„é…ç½®ç±»</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">  * 1.åˆ›å»ºJobå¯¹è±¡</span><br><span class="line">  */</span><br><span class="line"> @Bean</span><br><span class="line"> public JobDetailFactoryBean jobDetailFactoryBean() {</span><br><span class="line">     JobDetailFactoryBean factory = new JobDetailFactoryBean();</span><br><span class="line">     // å…³è”Jobç±»</span><br><span class="line">     factory.setJobClass(QuartzDemo.class);</span><br><span class="line">     return factory;</span><br><span class="line"> }</span><br><span class="line"></span><br><span class="line"> /**</span><br><span class="line">  * 2.åˆ›å»ºTriggerå¯¹è±¡ ç®€å•çš„trig</span><br><span class="line">  */</span><br><span class="line"></span><br><span class="line"> @Bean</span><br><span class="line"> public SimpleTriggerFactoryBean simpleTriggerFactoryBean(</span><br><span class="line">         JobDetailFactoryBean jobDetailFactoryBean) {</span><br><span class="line">     SimpleTriggerFactoryBean factory = new SimpleTriggerFactoryBean();</span><br><span class="line">     // å…³è”JobDetailå¯¹è±¡</span><br><span class="line">     factory.setJobDetail(jobDetailFactoryBean.getObject());</span><br><span class="line">     // è¯¥å‚æ•°è¡¨ç¤ºä¸€ä¸ªæ‰§è¡Œçš„æ¯«ç§’æ•°</span><br><span class="line">     factory.setRepeatInterval(2000);</span><br><span class="line">     // é‡å¤æ¬¡æ•°</span><br><span class="line">     factory.setRepeatCount(5);</span><br><span class="line">     return factory;</span><br><span class="line"> }</span><br><span class="line"> </span><br><span class="line"> /**</span><br><span class="line">  * 3.åˆ›å»ºSchedulerå¯¹è±¡</span><br><span class="line">  */</span><br><span class="line"> @Bean</span><br><span class="line"> public SchedulerFactoryBean schedulerFactoryBean(SimpleTriggerFactoryBean simpleTriggerFactoryBean) {</span><br><span class="line">     SchedulerFactoryBean factory=new SchedulerFactoryBean();</span><br><span class="line"></span><br><span class="line">     //å…³è”trigger</span><br><span class="line">     factory.setTriggers(simpleTriggerFactoryBean.getObject());</span><br><span class="line">     return factory;</span><br><span class="line"> }</span><br></pre></td></tr></tbody></table></figure><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;SpringBootå®šæ—¶ä»»åŠ¡&quot;&gt;SpringBootå®šæ—¶ä»»åŠ¡&lt;/h2&gt;
    
    </summary>
    
      <category term="SpringBoot" scheme="http://yoursite.com/blog/categories/SpringBoot/"/>
    
    
      <category term="SpringBoot" scheme="http://yoursite.com/blog/tags/SpringBoot/"/>
    
  </entry>
  
  <entry>
    <title>JDBC style parameters (?) are not supported for JPA queries.</title>
    <link href="http://yoursite.com/blog/2019/05/26/queries/"/>
    <id>http://yoursite.com/blog/2019/05/26/queries/</id>
    <published>2019-05-26T03:42:06.000Z</published>
    <updated>2019-05-26T03:56:50.469Z</updated>
    
    <content type="html"><![CDATA[<p>æ‰§è¡ŒHQLè¯­å¥æ—¶</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@Query("from Users where name = ?") </span><br><span class="line">List&lt;Users&gt; queryByNameUseHQL(String name);</span><br></pre></td></tr></tbody></table></figure><p>å‡ºç°é”™è¯¯</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Caused by: java.lang.IllegalArgumentException: JDBC style parameters (?) are not supported for JPA queries.</span><br></pre></td></tr></tbody></table></figure><p>åœ¨è¯¥ç‰ˆæœ¬ä¸­ä¸æ”¯æŒâ€™?'äº†<br>æ”¹ä¸º</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@Query("from Users where name =:name") </span><br><span class="line">   List&lt;Users&gt; queryByNameUseHQL(String name);</span><br></pre></td></tr></tbody></table></figure><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;æ‰§è¡ŒHQLè¯­å¥æ—¶&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;
      
    
    </summary>
    
      <category term="æ—¥å¸¸é—®é¢˜" scheme="http://yoursite.com/blog/categories/%E6%97%A5%E5%B8%B8%E9%97%AE%E9%A2%98/"/>
    
    
      <category term="æ—¥å¸¸é—®é¢˜" scheme="http://yoursite.com/blog/tags/%E6%97%A5%E5%B8%B8%E9%97%AE%E9%A2%98/"/>
    
  </entry>
  
  <entry>
    <title>SpringBootå­¦ä¹ ï¼ˆ9ï¼‰</title>
    <link href="http://yoursite.com/blog/2019/05/24/SpringBoot%E5%AD%A6%E4%B9%A0%20%20(9)/"/>
    <id>http://yoursite.com/blog/2019/05/24/SpringBootå­¦ä¹   (9)/</id>
    <published>2019-05-24T12:26:57.000Z</published>
    <updated>2019-05-27T15:12:43.829Z</updated>
    
    <content type="html"><![CDATA[<h2 id="SpringBoot-æ•´åˆSpring-Data-JPA">SpringBoot æ•´åˆSpring Data JPA</h2><a id="more"></a><h3 id="Spring-Data-JPAä»‹ç»">Spring Data JPAä»‹ç»</h3><p>Spring Data JPA:Springæä¾›çš„ä¸€ä¸ªæ“ä½œæ•°æ®çš„æ¡†æ¶ã€‚åŸºäºJPAçš„æ ‡å‡†å¯¹æ•°æ®è¿›è¡Œæ“ä½œï¼Œç®€åŒ–æ“ä½œæŒä¹…å±‚çš„ä»£ç ï¼Œåªéœ€è¦ç¼–å†™æ¥å£å°±å¯ä»¥ã€‚</p><h3 id="SpringBoot-æ•´åˆSpring-Data-JPA-v2">SpringBoot æ•´åˆSpring Data JPA</h3><h4 id="1-pomæ–‡ä»¶é…ç½®">1.pomæ–‡ä»¶é…ç½®</h4><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;</span><br><span class="line">  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;</span><br><span class="line">  &lt;groupId&gt;com.serendipity&lt;/groupId&gt;</span><br><span class="line">  &lt;artifactId&gt;19-spring-boot-jpa&lt;/artifactId&gt;</span><br><span class="line">  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;</span><br><span class="line">  &lt;!-- Inherit defaults from Spring Boot --&gt;</span><br><span class="line">&lt;parent&gt;</span><br><span class="line">&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;</span><br><span class="line">&lt;version&gt;2.1.4.RELEASE&lt;/version&gt;</span><br><span class="line">&lt;/parent&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;dependencies&gt;</span><br><span class="line">&lt;!-- springBootçš„å¯åŠ¨å™¨ --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;!-- springBootçš„å¯åŠ¨å™¨ --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- springBootçš„å¯åŠ¨å™¨ --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- æµ‹è¯•å·¥å…·çš„å¯åŠ¨å™¨ --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- mysql --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;mysql&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- druidè¿æ¥æ±  --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;com.alibaba&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;druid&lt;/artifactId&gt;</span><br><span class="line">&lt;version&gt;1.1.10&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- Spring Bootç¼“å­˜æ”¯æŒå¯åŠ¨å™¨ --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;spring-boot-starter-cache&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line"></span><br><span class="line">&lt;/dependencies&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- ä¿®æ”¹JDKç‰ˆæœ¬ --&gt;</span><br><span class="line">&lt;properties&gt;</span><br><span class="line">&lt;java.version&gt;1.8&lt;/java.version&gt;</span><br><span class="line">&lt;/properties&gt;</span><br><span class="line">&lt;/project&gt;</span><br></pre></td></tr></tbody></table></figure><h4 id="2-æ·»åŠ å…¨å±€é…ç½®æ–‡ä»¶">2.æ·»åŠ å…¨å±€é…ç½®æ–‡ä»¶</h4><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">spring.datasource.driverClassName=com.mysql.cj.jdbc.Driver</span><br><span class="line">spring.datasource.url=jdbc:mysql://localhost:3306/ssm?serverTimezone=GMT%2B8</span><br><span class="line">spring.datasource.username=root</span><br><span class="line">spring.datasource.password=123456</span><br><span class="line">spring.datasource.type=com.alibaba.druid.pool.DruidDataSource</span><br><span class="line">mybatis.type-aliases-package=com.serendipity.pojo</span><br><span class="line"></span><br><span class="line">#æ­£å‘å·¥ç¨‹</span><br><span class="line">spring.jpa.hibernate.ddl-auto=update</span><br><span class="line">#æ§åˆ¶å°è¾“å‡ºsqlè¯­å¥</span><br><span class="line">spring.jpa.show-sql=true</span><br></pre></td></tr></tbody></table></figure><h4 id="3-åˆ›å»ºå®ä½“ç±»">3.åˆ›å»ºå®ä½“ç±»</h4><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">@Entity //å®ä½“ç±»æ³¨è§£</span><br><span class="line">@Table(name="t_users") //å¯¹åº”è¡¨å</span><br><span class="line">public class Users  {</span><br><span class="line"></span><br><span class="line">    @Id</span><br><span class="line">    @GeneratedValue(strategy=GenerationType.IDENTITY) //ä¸»é”®ç”Ÿæˆç­–ç•¥</span><br><span class="line">    @Column(name="id")  //1.å¯¹è±¡idå’Œæ•°æ®åº“å­—æ®µå¯¹åº” 2.æ­£å‘å·¥ç¨‹ç”Ÿæˆæ•°æ®åº“çš„å­—æ®µ</span><br><span class="line">    private Integer id;</span><br><span class="line">    </span><br><span class="line">    @Column(name="name")</span><br><span class="line">    private String name;</span><br><span class="line">    </span><br><span class="line">    @Column(name="age")</span><br><span class="line">    private Integer age;</span><br><span class="line">    </span><br><span class="line">    @Column(name="address")</span><br><span class="line">    private String address;</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    public Integer getId() {</span><br><span class="line">        return id;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public void setId(Integer id) {</span><br><span class="line">        this.id = id;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public String getName() {</span><br><span class="line">        return name;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public void setName(String name) {</span><br><span class="line">        this.name = name;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public Integer getAge() {</span><br><span class="line">        return age;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public void setAge(Integer age) {</span><br><span class="line">        this.age = age;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public String getAddress() {</span><br><span class="line">        return address;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public void setAddress(String address) {</span><br><span class="line">        this.address = address;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public String toString() {</span><br><span class="line">        return "Users [id=" + id + ", name=" + name + ", age=" + age + ", address=" + address + "]";</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h4 id="4-ç¼–å†™daoæ¥å£">4.ç¼–å†™daoæ¥å£</h4><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> * å‚æ•°ä¸€ T :å½“å‰éœ€è¦æ˜ å°„çš„å®ä½“</span><br><span class="line"> * å‚æ•°äºŒ ID :å½“å‰æ˜ å°„çš„å®ä½“ä¸­çš„OIDçš„ç±»å‹</span><br><span class="line"> *</span><br><span class="line"> */</span><br><span class="line">public interface UsersRepository extends JpaRepository&lt;Users,Integer&gt;{</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h4 id="5-ç¼–å†™æµ‹è¯•ç±»">5.ç¼–å†™æµ‹è¯•ç±»</h4><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">@RunWith(SpringJUnit4ClassRunner.class)</span><br><span class="line">@SpringBootTest(classes=App.class)</span><br><span class="line">public class UsersRepositoryTest {</span><br><span class="line">        </span><br><span class="line">    @Autowired</span><br><span class="line">    private UsersRepository usersRepository;</span><br><span class="line">    </span><br><span class="line">    @Test</span><br><span class="line">    public void testSave() {</span><br><span class="line">        Users users = new Users();</span><br><span class="line">        users.setAddress("china");</span><br><span class="line">        users.setAge(20);</span><br><span class="line">        users.setName("tom");</span><br><span class="line">        usersRepository.save(users);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>è¿è¡Œæµ‹è¯•æ–¹æ³•ï¼Œæ•°æ®åº“ä¼šåˆ›å»ºt_userè¡¨ï¼Œå¹¶åŠ å…¥å¯¹åº”çš„æ•°æ®ã€‚</p><h3 id="Spring-Data-JPA-æä¾›çš„æ ¸å¿ƒæ¥å£">Spring Data JPA æä¾›çš„æ ¸å¿ƒæ¥å£</h3><p>1.Repositoryæ¥å£<br>2.CrudRepositoryæ¥å£<br>3.PagingAndSortingRepositoryæ¥å£<br>4.JpaRepository<br>5.JPASpecificationExecutoræ¥å£</p><h3 id="Repositoryæ¥å£">Repositoryæ¥å£</h3><h4 id="1-æä¾›æ–¹æ³•åç§°å‘½åæŸ¥è¯¢æ–¹å¼">1.æä¾›æ–¹æ³•åç§°å‘½åæŸ¥è¯¢æ–¹å¼</h4><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * Repositoryæ¥å£çš„æ–¹æ³•åç§°å‘½åæŸ¥è¯¢</span><br><span class="line"> */</span><br><span class="line">public interface UsersRepositoryByName extends Repository&lt;Users, Integer&gt; {</span><br><span class="line">    /**</span><br><span class="line">     *æ–¹æ³•çš„åç§°å¿…é¡»éµå¾ªé©¼å³°å¼å‘½åè§„åˆ™ï¼ŒfindBy+å±æ€§åç§°(é¦–å­—æ¯å¤§å†™)+æŸ¥è¯¢æ¡ä»¶(é¦–å­—æ¯å¤§å†™)</span><br><span class="line">     */</span><br><span class="line">    List&lt;Users&gt; findByName(String name);</span><br><span class="line">    </span><br><span class="line">    List&lt;Users&gt; findByNameAndAge(String name,Integer age);</span><br><span class="line">    </span><br><span class="line">    List&lt;Users&gt; findByNameLike(String name);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>æµ‹è¯•ä»£ç </p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">* Repository --æ–¹æ³•åç§°å‘½åæµ‹è¯•</span><br><span class="line"> */</span><br><span class="line">@Test</span><br><span class="line">public void testFindByName() {</span><br><span class="line">    List&lt;Users&gt; list = usersRepositoryByName.findByName("tom");</span><br><span class="line">    for (Users users : list) {</span><br><span class="line">        System.out.println(users.toString());</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line">  </span><br><span class="line">@Test</span><br><span class="line">public void testFindByNameAndAge() {</span><br><span class="line">    List&lt;Users&gt; list = usersRepositoryByName.findByNameAndAge("tom",20);</span><br><span class="line">    for (Users users : list) {</span><br><span class="line">        System.out.println(users.toString());</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">@Test</span><br><span class="line">public void testfindByNameLike() {</span><br><span class="line">    List&lt;Users&gt; list = usersRepositoryByName.findByNameLike("to%");</span><br><span class="line">    for (Users users : list) {</span><br><span class="line">        System.out.println(users.toString());</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h4 id="2-åŸºäº-Queryæ³¨è§£æŸ¥è¯¢ä¸æ›´æ–°">2.åŸºäº@Queryæ³¨è§£æŸ¥è¯¢ä¸æ›´æ–°</h4><p>æ¥å£</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line"> * Repository @Query</span><br><span class="line"> */</span><br><span class="line">public interface UsersRepositoryQueryAnnotation extends Repository&lt;Users, Integer&gt; {</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    @Query("from Users where name =:name") </span><br><span class="line">    List&lt;Users&gt; queryByNameUseHQL(String name);</span><br><span class="line">     </span><br><span class="line">    </span><br><span class="line">    @Query(value="select * from t_users where name= ?",nativeQuery=true)</span><br><span class="line">    List&lt;Users&gt; queryByNameUseSQL(String name);</span><br><span class="line">    </span><br><span class="line">    @Query("update Users set name=:name where id=:id")</span><br><span class="line">    @Modifying //éœ€è¦æ‰§è¡Œä¸€ä¸ªæ›´æ–°æ“ä½œ</span><br><span class="line">    void updateUsersNameById(String name,Integer id);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>æµ‹è¯•ä»£ç </p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">    * Queryæµ‹è¯•</span><br><span class="line">    */</span><br><span class="line">   </span><br><span class="line">   @Test</span><br><span class="line">   public void queryByNameUseHQL() {</span><br><span class="line">       List&lt;Users&gt; list = usersRepositoryQueryAnnotation.queryByNameUseHQL("tom");</span><br><span class="line">       for (Users users : list) {</span><br><span class="line">           System.out.println(users.toString());</span><br><span class="line">       }</span><br><span class="line">   }</span><br><span class="line">   @Test</span><br><span class="line">   public void queryByNameUserHQL() {</span><br><span class="line">       List&lt;Users&gt; list = usersRepositoryQueryAnnotation.queryByNameUseSQL("tom");</span><br><span class="line">       for (Users users : list) {</span><br><span class="line">           System.out.println(users.toString());</span><br><span class="line">       }</span><br><span class="line">   }</span><br><span class="line">   @Test</span><br><span class="line">   @Transactional</span><br><span class="line">   public void updateUsersNameById() {</span><br><span class="line">      usersRepositoryQueryAnnotation.updateUsersNameById("tomttt",1);</span><br><span class="line">      </span><br><span class="line">   }</span><br></pre></td></tr></tbody></table></figure><h3 id="CrudRepositoryæ¥å£">CrudRepositoryæ¥å£</h3><p>CrudRepositoryæ¥å£ï¼Œä¸»è¦æ—¶å®Œæˆä¸€äº›å¢åˆ æ”¹æŸ¥çš„æ“ä½œã€‚<strong>æ³¨æ„:CrudRepositoryæ¥å£ç»§æ‰¿Repositoryæ¥å£</strong><br>è¯¥æ¥å£çš„æ–¹æ³•ï¼š<br><img src="/images/SpringBoot/SpringBoot16.bmp" alt=""><br>æ¥å£ï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * CrudRepositoryæ¥å£</span><br><span class="line"> */</span><br><span class="line">public interface UsersRepositoryCrudRepository extends CrudRepository&lt;Users, Integer&gt; {</span><br><span class="line">    </span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>æµ‹è¯•ä»£ç </p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">   * CrudRepositoryæµ‹è¯•æŸ¥è¯¢</span><br><span class="line">   */</span><br><span class="line">  @Test</span><br><span class="line">  public void testCrudRepositoryFindOne() {</span><br><span class="line">    </span><br><span class="line">      Optional&lt;Users&gt; users = usersRepositoryCrudRepository.findById(3);</span><br><span class="line">      System.out.println(users);</span><br><span class="line">  }</span><br><span class="line">  </span><br><span class="line">  @Test</span><br><span class="line">  public void testCrudRepositoryFindAll() {</span><br><span class="line">      Iterable&lt;Users&gt; list = usersRepositoryCrudRepository.findAll();</span><br><span class="line">      for (Users users : list) {</span><br><span class="line">          System.out.println(users);</span><br><span class="line">      }</span><br><span class="line">      </span><br><span class="line">  }</span><br><span class="line">  @Test</span><br><span class="line">  public void testCrudRepositoryDeleteById() {</span><br><span class="line">     usersRepositoryCrudRepository.deleteById(3);</span><br><span class="line">      </span><br><span class="line">  }</span><br></pre></td></tr></tbody></table></figure><h3 id="PaginAndSortingRepositoryæ¥å£">PaginAndSortingRepositoryæ¥å£</h3><p>è¯¥æ¥å£æä¾›äº†åˆ†é¡µä¸æ’åºçš„æ“ä½œã€‚è¯¥æ¥å£ç»§æ‰¿äº†PagingAndSortingRepositoryæ¥å£<br>è¯¥æ¥å£çš„æ–¹æ³•<br><img src="/images/SpringBoot/SpringBoot15.bmp" alt=""></p><p>æµ‹è¯•æ¥å£ï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public interface UsersRepositoryPagingAndSorting extends PagingAndSortingRepository&lt;Users, Integer&gt;{</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>æµ‹è¯•ä»£ç ï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">   * PagingAndSorting æ’åºæµ‹è¯•</span><br><span class="line">   */</span><br><span class="line">  @Test</span><br><span class="line">  public void testUsersRepositoryPagingAndSorting() {</span><br><span class="line"></span><br><span class="line">      // Orderå®šä¹‰æ’åºè§„åˆ™</span><br><span class="line">      Order order = new Order(Direction.DESC, "id");</span><br><span class="line">      // Sortå¯¹è±¡å°è£…äº†æ’åºè§„åˆ™</span><br><span class="line">      Sort sort = new Sort(order);</span><br><span class="line">      Iterable&lt;Users&gt; list = usersRepositoryPagingAndSorting.findAll(sort);</span><br><span class="line">      for (Users users : list) {</span><br><span class="line">          System.out.println(users);</span><br><span class="line">      }</span><br><span class="line">  }</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  /**</span><br><span class="line">   * PagingAndSorting åˆ†é¡µæµ‹è¯•</span><br><span class="line">   */</span><br><span class="line">  @Test</span><br><span class="line">  public void testUsersRepositoryPagingAndSortingPaging() {</span><br><span class="line">      //Pageableï¼šå°è£…äº†åˆ†é¡µçš„å‚æ•°ï¼Œå½“å‰é¡µï¼Œæ¯é¡µæ˜¾ç¤ºçš„å‚æ•°ã€‚</span><br><span class="line">      //æ³¨æ„ï¼šå½“å‰é¡µä»0å¼€å§‹</span><br><span class="line">      Pageable pageable=new PageRequest(0, 1);</span><br><span class="line">      Page&lt;Users&gt; page = usersRepositoryPagingAndSorting.findAll(pageable);</span><br><span class="line">      System.out.println("æ€»æ¡æ•°:"+page.getTotalElements());</span><br><span class="line">      System.out.println("æ€»é¡µæ•°"+page.getTotalPages());</span><br><span class="line">      List&lt;Users&gt; content = page.getContent();</span><br><span class="line">      for (Users users : content) {</span><br><span class="line">          System.out.println(users);</span><br><span class="line">      }</span><br><span class="line">  }</span><br></pre></td></tr></tbody></table></figure><h3 id="JpaRepositoryæ¥å£">JpaRepositoryæ¥å£</h3><p>è¯¥æ¥å£ç»§æ‰¿äº†PagingAndSortingRepositoryæ¥å£ã€‚å¯¹ç»§æ‰¿çš„çˆ¶æ¥å£çš„æ–¹æ³•çš„è¿”å›å€¼è¿›è¡Œé€‚é…<br>æ¥å£ï¼š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * å‚æ•°ä¸€ T :å½“å‰éœ€è¦æ˜ å°„çš„å®ä½“</span><br><span class="line"> * å‚æ•°äºŒ ID :å½“å‰æ˜ å°„çš„å®ä½“ä¸­çš„OIDçš„ç±»å‹</span><br><span class="line"> *</span><br><span class="line"> */</span><br><span class="line">public interface UsersRepository extends JpaRepository&lt;Users,Integer&gt;{</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="å…³è”æ˜ å°„æ“ä½œ">å…³è”æ˜ å°„æ“ä½œ</h3><h4 id="ä¸€å¯¹å¤šçš„å…³è”å…³ç³»">ä¸€å¯¹å¤šçš„å…³è”å…³ç³»</h4><p>éœ€æ±‚:è§’è‰²ä¸ç”¨æˆ·çš„</p><p>users:</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">@ManyToOne</span><br><span class="line">@JoinColumn(name="roles_id") //ç»´æŠ¤å¤–é”®</span><br><span class="line">   private Roles roles;</span><br><span class="line">   </span><br><span class="line">   public Roles getRoles() {</span><br><span class="line">        return roles;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">   public void setRoles(Roles roles) {</span><br><span class="line">        this.roles = roles;</span><br><span class="line">    }</span><br></pre></td></tr></tbody></table></figure><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;SpringBoot-æ•´åˆSpring-Data-JPA&quot;&gt;SpringBoot æ•´åˆSpring Data JPA&lt;/h2&gt;
    
    </summary>
    
      <category term="SpringBoot" scheme="http://yoursite.com/blog/categories/SpringBoot/"/>
    
    
      <category term="SpringBoot" scheme="http://yoursite.com/blog/tags/SpringBoot/"/>
    
  </entry>
  
  <entry>
    <title>Springå­¦ä¹ ï¼ˆ8ï¼‰</title>
    <link href="http://yoursite.com/blog/2019/05/24/SpringBoot%E5%AD%A6%E4%B9%A0%20%20(8)/"/>
    <id>http://yoursite.com/blog/2019/05/24/SpringBootå­¦ä¹   (8)/</id>
    <published>2019-05-24T11:51:58.000Z</published>
    <updated>2019-05-24T14:30:20.066Z</updated>
    
    <content type="html"><![CDATA[<h2 id="SpringBootçƒ­éƒ¨ç½²">SpringBootçƒ­éƒ¨ç½²</h2><a id="more"></a><h3 id="æ–¹å¼ä¸€-ä½¿ç”¨SpringLoaderæ’ä»¶">æ–¹å¼ä¸€:ä½¿ç”¨SpringLoaderæ’ä»¶</h3><p>åœ¨pomæ–‡ä»¶æ·»åŠ æ’ä»¶é…ç½®</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;build&gt;</span><br><span class="line">&lt;plugins&gt;</span><br><span class="line">&lt;plugin&gt;</span><br><span class="line">&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;</span><br><span class="line">&lt;dependencies&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;org.springframework&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;springloaded&lt;/artifactId&gt;</span><br><span class="line">&lt;version&gt;1.2.5.RELEASE&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;/dependencies&gt;</span><br><span class="line">&lt;/plugin&gt;</span><br><span class="line">&lt;/plugins&gt;</span><br><span class="line">&lt;/build&gt;</span><br></pre></td></tr></tbody></table></figure><p>maven buildé…ç½®<br><img src="/images/SpringBoot/SpringBoot14.bmp" alt=""></p><h3 id="æ–¹å¼äºŒï¼šä½¿ç”¨Devtoolså·¥å…·">æ–¹å¼äºŒï¼šä½¿ç”¨Devtoolså·¥å…·</h3><p>åœ¨pomæ–‡ä»¶æ·»åŠ devtoolsçš„ä¾èµ–</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- DevTools --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;</span><br><span class="line">&lt;!-- è¡¨ç¤ºå½“å‰ä¾èµ–ä¸å‘ä¸‹ä¼ é€’ --&gt;</span><br><span class="line">&lt;optional&gt;true&lt;/optional&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></tbody></table></figure><p>æ€»ç»“ï¼š<br>SpringLoaderï¼šSpringLoader åœ¨éƒ¨ç½²é¡¹ç›®æ—¶ä½¿ç”¨çš„æ˜¯çƒ­éƒ¨ç½²çš„æ–¹å¼ã€‚ä½†åªå¯¹Javaä»£ç åšéƒ¨ç½²å¤„ç†ï¼Œå¯¹é¡µé¢æ— èƒ½ä¸ºåŠ›ã€‚<br>DevToolsï¼šDevTools åœ¨éƒ¨ç½²é¡¹ç›®æ—¶ä½¿ç”¨çš„æ˜¯é‡æ–°éƒ¨ç½²çš„æ–¹å¼</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;SpringBootçƒ­éƒ¨ç½²&quot;&gt;SpringBootçƒ­éƒ¨ç½²&lt;/h2&gt;
    
    </summary>
    
      <category term="SpringBoot" scheme="http://yoursite.com/blog/categories/SpringBoot/"/>
    
    
      <category term="SpringBoot" scheme="http://yoursite.com/blog/tags/SpringBoot/"/>
    
  </entry>
  
  <entry>
    <title>SpringBootå­¦ä¹ ï¼ˆ7ï¼‰</title>
    <link href="http://yoursite.com/blog/2019/05/23/SpringBoot%E5%AD%A6%E4%B9%A0%20%20(7)/"/>
    <id>http://yoursite.com/blog/2019/05/23/SpringBootå­¦ä¹   (7)/</id>
    <published>2019-05-23T12:34:51.000Z</published>
    <updated>2019-05-23T14:08:50.570Z</updated>
    
    <content type="html"><![CDATA[<h2 id="SpringBootä¸­å¼‚å¸¸å¤„ç†æ–¹å¼">SpringBootä¸­å¼‚å¸¸å¤„ç†æ–¹å¼</h2><h3 id="1-SpringBoot-ä¸­å¯¹äºå¼‚å¸¸å¤„ç†æä¾›äº†äº”ç§å¤„ç†æ–¹å¼">1.SpringBoot ä¸­å¯¹äºå¼‚å¸¸å¤„ç†æä¾›äº†äº”ç§å¤„ç†æ–¹å¼</h3><h4 id="1-1è‡ªå®šä¹‰é”™è¯¯é¡µé¢">1.1è‡ªå®šä¹‰é”™è¯¯é¡µé¢</h4><p>SpringBoot é»˜è®¤çš„å¤„ç†å¼‚å¸¸çš„æœºåˆ¶ï¼šSpringBoot é»˜è®¤çš„å·²ç»æä¾›äº†ä¸€å¥—å¤„ç†å¼‚å¸¸çš„æœºåˆ¶ã€‚<br>ä¸€æ—¦ç¨‹åºä¸­å‡ºç°äº†å¼‚å¸¸SpringBoot ä¼šåƒ/error çš„url å‘é€è¯·æ±‚ã€‚åœ¨springBoot ä¸­æä¾›äº†ä¸€ä¸ª<br>å«BasicExceptionController æ¥å¤„ç†/error è¯·æ±‚ï¼Œç„¶åè·³è½¬åˆ°é»˜è®¤æ˜¾ç¤ºå¼‚å¸¸çš„é¡µé¢æ¥å±•ç¤ºå¼‚å¸¸<br>ä¿¡æ¯ã€‚</p><p>å¦‚æœæˆ‘ä»¬éœ€è¦å°†æ‰€æœ‰çš„å¼‚å¸¸åŒä¸€è·³è½¬åˆ°è‡ªå®šä¹‰çš„é”™è¯¯é¡µé¢ï¼Œ éœ€è¦å†<br>src/main/resources/templates ç›®å½•ä¸‹åˆ›å»ºerror.html é¡µé¢ã€‚<strong>æ³¨æ„ï¼šåç§°å¿…é¡»å«error</strong><br>è‡ªå®šä¹‰é”™è¯¯é¡µé¢<br><img src="/images/SpringBoot/SpringBoot13.bmp" alt=""></p><h4 id="1-2-ExceptionHandle-æ³¨è§£å¤„ç†å¼‚å¸¸">1.2@ExceptionHandle æ³¨è§£å¤„ç†å¼‚å¸¸</h4><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@ExceptionHandler(value= {java.lang.ArithmeticException.class})</span><br><span class="line">   public ModelAndView ArithmeticExceptionHandler(Exception e) {</span><br><span class="line">         ModelAndView mv = new ModelAndView();</span><br><span class="line">         mv.addObject("error",e.toString());</span><br><span class="line">         mv.setViewName("error2");</span><br><span class="line">        return mv;</span><br><span class="line">    }</span><br></pre></td></tr></tbody></table></figure><h4 id="1-3-ControllerAdvice-ExceptionHandler-æ³¨è§£å¤„ç†å¼‚å¸¸">1.3@ControllerAdvice+@ExceptionHandler æ³¨è§£å¤„ç†å¼‚å¸¸</h4><p>éœ€è¦åˆ›å»ºä¸€ä¸ªèƒ½å¤Ÿå¤„ç†å¼‚å¸¸çš„å…¨å±€å¼‚å¸¸ç±»ã€‚åœ¨è¯¥ç±»ä¸Šéœ€è¦æ·»åŠ @ControllerAdvice æ³¨è§£</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">@ControllerAdvice</span><br><span class="line">public class GlobalException {</span><br><span class="line">    /**</span><br><span class="line">     * </span><br><span class="line">     * @param e ä¼šå°†äº§ç”Ÿçš„å¼‚å¸¸å¯¹è±¡æ³¨å…¥åˆ°æ–¹æ³•ä¸­</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    @ExceptionHandler(value= {java.lang.ArithmeticException.class})</span><br><span class="line">    public ModelAndView ArithmeticExceptionHandler(Exception e) {</span><br><span class="line">            ModelAndView mv = new ModelAndView();</span><br><span class="line">            mv.addObject("error",e.toString());</span><br><span class="line">            mv.setViewName("error2");</span><br><span class="line">            return mv;</span><br><span class="line">    }</span><br></pre></td></tr></tbody></table></figure><h4 id="1-4é…ç½®SimpleMappingExceptionResolver-å¤„ç†å¼‚å¸¸">1.4é…ç½®SimpleMappingExceptionResolver å¤„ç†å¼‚å¸¸</h4><p>åœ¨å…¨å±€å¼‚å¸¸ç±»ä¸­æ·»åŠ ä¸€ä¸ªæ–¹æ³•å®Œæˆå¼‚å¸¸çš„åŒä¸€å¤„ç†<br>åªèƒ½åšå¼‚å¸¸ä¸è§†å›¾æ˜ å°„ï¼Œè¯¥æ–¹æ³•ä¸ä¼šè¿”å›å¼‚å¸¸ä¿¡æ¯</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">@Configuration</span><br><span class="line">public class GlobalException {</span><br><span class="line">    /**</span><br><span class="line">     * è¯¥æ–¹æ³•æœ‰è¿”å›å€¼</span><br><span class="line">     */</span><br><span class="line">    @Bean</span><br><span class="line">   public SimpleMappingExceptionResolver getExceptionResolver() {</span><br><span class="line">        SimpleMappingExceptionResolver resolver = new SimpleMappingExceptionResolver();</span><br><span class="line">        </span><br><span class="line">        Properties mappings=new Properties();</span><br><span class="line">        /**</span><br><span class="line">         * å‚æ•°ä¸€ï¼šå¼‚å¸¸çš„ç±»å‹ï¼Œå¿…é¡»æ˜¯å¼‚å¸¸ç±»å‹çš„å…¨å</span><br><span class="line">         * å‚æ•°äºŒï¼šè§†å›¾åç§°</span><br><span class="line">         */</span><br><span class="line">        mappings.put("java.lang.ArithmeticException", "error2");</span><br><span class="line">        mappings.put("java.lang.NullPointerException", "error3");</span><br><span class="line">        //è®¾ç½®å¼‚å¸¸ä¸è§†å›¾æ˜ å°„ä¿¡æ¯çš„</span><br><span class="line">        resolver.setExceptionMappings(mappings);</span><br><span class="line">    </span><br><span class="line">        return resolver;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h4 id="1-5è‡ªå®šä¹‰HandlerExceptionResolver-ç±»å¤„ç†å¼‚å¸¸">1.5è‡ªå®šä¹‰HandlerExceptionResolver ç±»å¤„ç†å¼‚å¸¸</h4><p>éœ€è¦å†å…¨å±€å¼‚å¸¸å¤„ç†ç±»ä¸­å®ç°HandlerExceptionResolver æ¥å£</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">@Configuration</span><br><span class="line">public class GlobalException implements HandlerExceptionResolver{</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public ModelAndView resolveException(HttpServletRequest request, HttpServletResponse response,</span><br><span class="line">            Object handler, Exception ex) {</span><br><span class="line">        // TODO Auto-generated method stub</span><br><span class="line">        ModelAndView mv = new ModelAndView();</span><br><span class="line">        //åˆ¤æ–­ä¸åŒå¼‚å¸¸ç±»å‹ï¼Œåšä¸åŒçš„è§†å›¾è·³è½¬</span><br><span class="line">        if(ex instanceof ArithmeticException) {</span><br><span class="line">            mv.setViewName("error2");</span><br><span class="line">        }</span><br><span class="line">        if(ex instanceof NullPointerException) {</span><br><span class="line">            mv.setViewName("error3");</span><br><span class="line">        }</span><br><span class="line">        mv.addObject("error",ex.toString());</span><br><span class="line">        return mv;</span><br><span class="line">    }</span><br><span class="line">   </span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;SpringBootä¸­å¼‚å¸¸å¤„ç†æ–¹å¼&quot;&gt;SpringBootä¸­å¼‚å¸¸å¤„ç†æ–¹å¼&lt;/h2&gt;
&lt;h3 id=&quot;1-SpringBoot-ä¸­å¯¹äºå¼‚å¸¸å¤„ç†æä¾›äº†äº”ç§å¤„ç†æ–¹å¼&quot;&gt;1.SpringBoot ä¸­å¯¹äºå¼‚å¸¸å¤„ç†æä¾›äº†äº”ç§å¤„ç†æ–¹å¼&lt;/h3&gt;
&lt;h4 id=&quot;1-1è‡ªå®šä¹‰é”™è¯¯
      
    
    </summary>
    
      <category term="SpringBoot" scheme="http://yoursite.com/blog/categories/SpringBoot/"/>
    
    
      <category term="SpringBoot" scheme="http://yoursite.com/blog/tags/SpringBoot/"/>
    
  </entry>
  
  <entry>
    <title>SpringBootæ•´åˆmybatis</title>
    <link href="http://yoursite.com/blog/2019/05/22/SpringBoot%E5%AD%A6%E4%B9%A0%20%20(6)/"/>
    <id>http://yoursite.com/blog/2019/05/22/SpringBootå­¦ä¹   (6)/</id>
    <published>2019-05-22T13:24:43.000Z</published>
    <updated>2019-05-23T11:41:42.965Z</updated>
    
    <content type="html"><![CDATA[<p>é€šè¿‡ä½¿ç”¨SpringBoot+SpringMVC+MyBatis æ•´åˆå®ç°ä¸€ä¸ªå¯¹æ•°æ®åº“ä¸­çš„users è¡¨çš„CRUD çš„æ“ä½œ</p><a id="more"></a><h2 id="åˆ›å»ºé¡¹ç›®">åˆ›å»ºé¡¹ç›®</h2><h3 id="1-ä¿®æ”¹pomæ–‡ä»¶">1.ä¿®æ”¹pomæ–‡ä»¶</h3><p>åŠ å…¥mybatiså¯åŠ¨å™¨</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">&lt;project xmlns="http://maven.apache.org/POM/4.0.0"</span><br><span class="line">xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"</span><br><span class="line">xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;</span><br><span class="line">&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;</span><br><span class="line">&lt;groupId&gt;com.serendipity&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;08-spring-boot-springmvc-mybatis&lt;/artifactId&gt;</span><br><span class="line">&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- Inherit defaults from Spring Boot --&gt;</span><br><span class="line">&lt;parent&gt;</span><br><span class="line">&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;</span><br><span class="line">&lt;version&gt;2.1.4.RELEASE&lt;/version&gt;</span><br><span class="line">&lt;/parent&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;!-- Add typical dependencies for a web application --&gt;</span><br><span class="line">&lt;dependencies&gt;</span><br><span class="line">&lt;!-- SpringBootå¯åŠ¨å™¨ --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;!-- Thymeleafå¯åŠ¨å™¨ --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;!-- Mybatiså¯åŠ¨å™¨ --&gt;</span><br><span class="line">&lt;!-- https://mvnrepository.com/artifact/org.mybatis.spring.boot/mybatis-spring-boot-starter --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt;</span><br><span class="line">&lt;version&gt;1.3.2&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;!-- mysqlæ•°æ®åº“é©±åŠ¨ --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;mysql&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- druidæ•°æ®åº“è¿æ¥æ±  --&gt;</span><br><span class="line">&lt;!-- https://mvnrepository.com/artifact/com.alibaba/druid --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;com.alibaba&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;druid&lt;/artifactId&gt;</span><br><span class="line">&lt;version&gt;1.1.10&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line"></span><br><span class="line">&lt;/dependencies&gt;</span><br><span class="line"></span><br><span class="line">&lt;build&gt;</span><br><span class="line">&lt;plugins&gt;</span><br><span class="line">&lt;plugin&gt;</span><br><span class="line">&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;</span><br><span class="line">&lt;/plugin&gt;</span><br><span class="line">&lt;/plugins&gt;</span><br><span class="line">&lt;/build&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- ä¿®æ”¹JDKç‰ˆæœ¬ --&gt;</span><br><span class="line">&lt;properties&gt;</span><br><span class="line">&lt;java.version&gt;1.8&lt;/java.version&gt;</span><br><span class="line">&lt;/properties&gt;</span><br><span class="line">&lt;/project&gt;</span><br></pre></td></tr></tbody></table></figure><h3 id="2-æ·»åŠ application-propertieså…¨å±€é…ç½®æ–‡ä»¶">2.æ·»åŠ application.propertieså…¨å±€é…ç½®æ–‡ä»¶</h3><p>å…¶ä¸­mysqlçš„é©±åŠ¨ä¸ºcom.mysql.cj.jdbc.Driver</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">spring.datasource.driverClassName=com.mysql.cj.jdbc.Driver</span><br><span class="line">spring.datasource.url=jdbc:mysql://localhost:3306/ssm?serverTimezone=GMT%2B8</span><br><span class="line">spring.datasource.username=root</span><br><span class="line">spring.datasource.password=123456</span><br><span class="line">spring.datasource.type=com.alibaba.druid.pool.DruidDataSource</span><br><span class="line">mybatis.type-aliases-package=com.serendipity.pojo</span><br></pre></td></tr></tbody></table></figure><h3 id="3-æ•°æ®åº“è¡¨è®¾è®¡">3.æ•°æ®åº“è¡¨è®¾è®¡</h3><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE `users` (</span><br><span class="line">  `id` int(11) NOT NULL AUTO_INCREMENT,</span><br><span class="line">  `name` varchar(255) DEFAULT NULL,</span><br><span class="line">  `age` int(11) DEFAULT NULL,</span><br><span class="line">  PRIMARY KEY (`id`)</span><br><span class="line">) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8;</span><br></pre></td></tr></tbody></table></figure><h2 id="æ·»åŠ ç”¨æˆ·">æ·»åŠ ç”¨æˆ·</h2><h3 id="1-åˆ›å»ºå®ä½“ç±»">1.åˆ›å»ºå®ä½“ç±»</h3><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">public class Users {</span><br><span class="line">    private Integer id;</span><br><span class="line">    private String name;</span><br><span class="line">    private Integer age;</span><br><span class="line">    public Integer getId() {</span><br><span class="line">        return id;</span><br><span class="line">    }</span><br><span class="line">    public void setId(Integer id) {</span><br><span class="line">        this.id = id;</span><br><span class="line">    }</span><br><span class="line">    public String getName() {</span><br><span class="line">        return name;</span><br><span class="line">    }</span><br><span class="line">    public void setName(String name) {</span><br><span class="line">        this.name = name;</span><br><span class="line">    }</span><br><span class="line">    public Integer getAge() {</span><br><span class="line">        return age;</span><br><span class="line">    }</span><br><span class="line">    public void setAge(Integer age) {</span><br><span class="line">        this.age = age;</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="2-åˆ›å»ºmapperæ¥å£">2.åˆ›å»ºmapperæ¥å£</h3><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">public interface UsersService {</span><br><span class="line">    /**</span><br><span class="line">     * æ·»åŠ ç”¨æˆ·</span><br><span class="line">     * @param users</span><br><span class="line">     */</span><br><span class="line">    void addUser(Users users);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="3-åˆ›å»ºæ˜ å°„æ–‡ä»¶">3.åˆ›å»ºæ˜ å°„æ–‡ä»¶</h3><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span><br><span class="line">&lt;!DOCTYPE mapper</span><br><span class="line">PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"</span><br><span class="line">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"&gt;</span><br><span class="line"></span><br><span class="line">&lt;mapper namespace="com.serendipity.mapper.UsersMapper"&gt;</span><br><span class="line">&lt;insert id="insertUser" parameterType="users"&gt;</span><br><span class="line">insert into users(name,age) values(#{name},#{age})</span><br><span class="line">&lt;/insert&gt;</span><br><span class="line">&lt;/mapper&gt;</span><br></pre></td></tr></tbody></table></figure><h3 id="4-åˆ›å»ºä¸šåŠ¡å±‚">4.åˆ›å»ºä¸šåŠ¡å±‚</h3><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">@Service</span><br><span class="line">@Transactional</span><br><span class="line">public class UsersServiceImpl implements UsersService {</span><br><span class="line">    </span><br><span class="line">    @Autowired</span><br><span class="line">   private UsersMapper usersMapper;</span><br><span class="line">    </span><br><span class="line">    @Override</span><br><span class="line">    public void addUser(Users users) {</span><br><span class="line">        // TODO Auto-generated method stub</span><br><span class="line">        usersMapper.insertUser(users);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="5-åˆ›å»ºController">5.åˆ›å»ºController</h3><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">@Controller</span><br><span class="line">@RequestMapping("/users")</span><br><span class="line">public class UsersController {</span><br><span class="line">    @Autowired</span><br><span class="line">    private UsersService usersService;</span><br><span class="line">    /**</span><br><span class="line">          * é¡µé¢è·³è½¬</span><br><span class="line">     */</span><br><span class="line">    @RequestMapping("/{page}")</span><br><span class="line">    public String showPage(@PathVariable String page) {</span><br><span class="line">        return page;</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    /**</span><br><span class="line">     *     æ·»åŠ ç”¨æˆ·</span><br><span class="line">     */</span><br><span class="line">    </span><br><span class="line">    @RequestMapping("/addUser")</span><br><span class="line">    public String addUser(Users users) {</span><br><span class="line">        usersService.addUser(users);</span><br><span class="line">        return "ok";</span><br><span class="line">    }</span><br></pre></td></tr></tbody></table></figure><h3 id="6-å‰å°é¡µé¢">6.å‰å°é¡µé¢</h3><h4 id="æˆåŠŸé¡µé¢">æˆåŠŸé¡µé¢</h4><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset="UTF-8"&gt;</span><br><span class="line">&lt;title&gt;æ“ä½œæç¤ºé¡µé¢&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">æ“ä½œæˆåŠŸï¼ï¼ï¼</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></tbody></table></figure><h4 id="æ·»åŠ é¡µé¢">æ·»åŠ é¡µé¢</h4><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset="UTF-8"&gt;</span><br><span class="line">&lt;title&gt;æ·»åŠ ç”¨æˆ·&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;form th:action="@{/users/addUser}" method="post"&gt;</span><br><span class="line">ç”¨æˆ·å§“åï¼š&lt;input type="text" name="name"/&gt;&lt;br/&gt;</span><br><span class="line">ç”¨æˆ·å¹´é¾„ï¼š&lt;input type="text" name="age"/&gt;&lt;br/&gt;</span><br><span class="line">&lt;input type="submit" value="ç¡®å®š"/&gt;&lt;br/&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></tbody></table></figure><h3 id="7-å¯åŠ¨ç±»">7.å¯åŠ¨ç±»</h3><p>åŠ ä¸Šæ‰«æMapperæ¥å£çš„æ³¨è§£</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">@SpringBootApplication</span><br><span class="line">@MapperScan("com.serendipity.mapper")   //ç”¨äºæ‰«æMybatisçš„Mapperæ¥å£</span><br><span class="line">public class App {</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) {</span><br><span class="line">        // TODO Auto-generated method stub</span><br><span class="line">        SpringApplication.run(App.class, args);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>é¡¹ç›®é“¾æ¥ï¼š<a href="https://github.com/SerendipityH/SpringBoot/tree/master/08-spring-boot-springmvc-mybatis" target="_blank" rel="noopener">https://github.com/SerendipityH/SpringBoot/tree/master/08-spring-boot-springmvc-mybatis</a></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;é€šè¿‡ä½¿ç”¨SpringBoot+SpringMVC+MyBatis æ•´åˆå®ç°ä¸€ä¸ªå¯¹æ•°æ®åº“ä¸­çš„users è¡¨çš„CRUD çš„æ“ä½œ&lt;/p&gt;
    
    </summary>
    
      <category term="SpringBoot" scheme="http://yoursite.com/blog/categories/SpringBoot/"/>
    
    
      <category term="SpringBoot" scheme="http://yoursite.com/blog/tags/SpringBoot/"/>
    
  </entry>
  
  <entry>
    <title>SpringBootå­¦ä¹ ï¼ˆ5ï¼‰</title>
    <link href="http://yoursite.com/blog/2019/05/21/SpringBoot%E5%AD%A6%E4%B9%A0%20%20(5)/"/>
    <id>http://yoursite.com/blog/2019/05/21/SpringBootå­¦ä¹   (5)/</id>
    <published>2019-05-21T12:26:36.000Z</published>
    <updated>2019-05-21T14:44:34.323Z</updated>
    
    <content type="html"><![CDATA[<h3 id="SpringBootæ•´åˆThymeleaf">SpringBootæ•´åˆThymeleaf</h3><h3 id="ThymeleafåŸºæœ¬ä½¿ç”¨">ThymeleafåŸºæœ¬ä½¿ç”¨</h3><p>1.åœ¨åŸæ¥pomæ–‡ä»¶çš„åŸºç¡€åŠ ä¸Š</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- Thymeleafå¯åŠ¨å™¨ --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></tbody></table></figure><p>2.åˆ›å»ºå­˜æ”¾è§†å›¾çš„ç›®å½•<br>ç›®å½•ä½ç½®ï¼šsrc/main/resources/templates<br>templatesï¼šè¯¥ç›®å½•æ˜¯å®‰å…¨çš„ã€‚æ„å‘³ç€è¯¥ç›®å½•ä¸‹çš„å†…å®¹æ˜¯ä¸å…è®¸å¤–ç•Œç›´æ¥è®¿é—®çš„ã€‚<br><img src="/images/SpringBoot/SpringBoot11.bmp" alt=""></p><p>3.Thymeleaf çš„åŸºæœ¬ä½¿ç”¨<br>Thymelaef æ˜¯é€šè¿‡ä»–ç‰¹å®šè¯­æ³•å¯¹html çš„æ ‡è®°åšæ¸²æŸ“</p><p>ç¼–å†™Controller</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">@Controller</span><br><span class="line">public class DemoController {</span><br><span class="line">           </span><br><span class="line">    @RequestMapping("/show")</span><br><span class="line">    public String showInfo(Model model) {</span><br><span class="line">        model.addAttribute("msg", "Thymeleaf ç¬¬ä¸€ä¸ªæ¡ˆä¾‹");</span><br><span class="line">        return "index";</span><br><span class="line">    }   </span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>åˆ›å»ºè§†å›¾.html</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset="UTF-8"&gt;</span><br><span class="line">&lt;title&gt;Thymeleafå…¥é—¨&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;span th:text="Hello"&gt;&lt;/span&gt;</span><br><span class="line">&lt;hr/&gt;</span><br><span class="line">&lt;span th:text="${msg}"&gt;&lt;/span&gt;</span><br><span class="line">&lt;hr/&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></tbody></table></figure><p>4.æµ‹è¯•<br><img src="/images/SpringBoot/SpringBoot12.bmp" alt=""></p><hr><h3 id="Thymeleafè¯­æ³•è¯¦è§£">Thymeleafè¯­æ³•è¯¦è§£</h3><blockquote><h4 id="å˜é‡è¾“å‡º">å˜é‡è¾“å‡º</h4><ul><li>åœ¨é¡µé¢ä¸­è¾“å‡ºå€¼</li></ul><blockquote><p>th:text</p></blockquote><ul><li>å¯ä»¥å°†ä¸€ä¸ªå€¼æ”¾å…¥åˆ°inputæ ‡ç­¾çš„valueä¸­</li></ul><blockquote><p>th:value</p></blockquote></blockquote><h4 id="å­—ç¬¦ä¸²æ“ä½œ">å­—ç¬¦ä¸²æ“ä½œ</h4><p>1.åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä¸ºç©ºï¼Œå¦‚æœä¸ºç©ºè¿”å›trueï¼Œå¦åˆ™è¿”å›false</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;span th:text="${#strings.isEmpty(msg)}"&gt;&lt;/span&gt;</span><br></pre></td></tr></tbody></table></figure><p>2.åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦åŒ…å«æŒ‡å®šçš„å­ä¸²ï¼Œå¦‚æœåŒ…å«è¿”å›trueï¼Œå¦åˆ™è¿”å›false</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;span th:text="${#strings.contains(msg,'T')}"&gt;&lt;/span&gt;</span><br></pre></td></tr></tbody></table></figure><p>3.åˆ¤æ–­å½“å‰å­—ç¬¦ä¸²æ˜¯å¦ä»¥å­ä¸²å¼€å¤´ï¼Œå¦‚æœæ˜¯è¿”å›trueï¼Œå¦åˆ™è¿”å›false</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;span th:text="${#strings.startsWith(msg,'T')}"&gt;&lt;/span&gt;</span><br></pre></td></tr></tbody></table></figure><p>4.åˆ¤æ–­å½“å‰å­—ç¬¦ä¸²æ˜¯å¦ä»¥å­ä¸²ç»“å°¾ï¼Œå¦‚æœæ˜¯è¿”å›trueï¼Œå¦åˆ™è¿”å›false</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;span th:text="${#strings.endsWith(msg,'T')}"&gt;&lt;/span&gt;</span><br></pre></td></tr></tbody></table></figure><h4 id="æ—¥æœŸæ ¼å¼åŒ–å¤„ç†">æ—¥æœŸæ ¼å¼åŒ–å¤„ç†</h4><p>1.æ ¼å¼åŒ–æ—¥æœŸï¼Œé»˜è®¤çš„ä»¥æµè§ˆå™¨é»˜è®¤è¯­è¨€ä¸ºæ ¼å¼åŒ–æ ‡å‡†</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;span th:text="${#dates.format(key)}"&gt;&lt;/span&gt;</span><br></pre></td></tr></tbody></table></figure><p>2.æŒ‰ç…§è‡ªå®šä¹‰çš„æ ¼å¼åšæ—¥æœŸè½¬æ¢</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;span th:text="${#dates.format(key,'yyy/MM/dd')}"&gt;&lt;/span&gt;</span><br></pre></td></tr></tbody></table></figure><p>3.å–å¹´æœˆæ—¥</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;span th:text="${#dates.year(key)}"&gt;&lt;/span&gt;</span><br><span class="line">&lt;hr/&gt;</span><br><span class="line">&lt;span th:text="${#dates.month(key)}"&gt;&lt;/span&gt;</span><br><span class="line">&lt;hr/&gt;</span><br><span class="line">&lt;span th:text="${#dates.day(key)}"&gt;&lt;/span&gt;</span><br></pre></td></tr></tbody></table></figure><h4 id="æ¡ä»¶åˆ¤æ–­">æ¡ä»¶åˆ¤æ–­</h4><p>ä½¿ç”¨th:if</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;span th:if="${sex}=='ç”·'"&gt;</span><br><span class="line">æ€§åˆ«ï¼šç”·</span><br><span class="line">&lt;/span&gt;</span><br><span class="line">&lt;span th:if="${sex}=='å¥³'"&gt;</span><br><span class="line">æ€§åˆ«ï¼šå¥³</span><br><span class="line">&lt;/span&gt;</span><br></pre></td></tr></tbody></table></figure><p>ä½¿ç”¨th:case</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;div th:switch="${id}"&gt;</span><br><span class="line">&lt;span th:case="1"&gt;1&lt;/span&gt;</span><br><span class="line">&lt;span th:case="2"&gt;2&lt;/span&gt;</span><br><span class="line">&lt;span th:case="3"&gt;3&lt;/span&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></tbody></table></figure><h4 id="åŸŸå¯¹è±¡æ“ä½œ">åŸŸå¯¹è±¡æ“ä½œ</h4><pre><code>Request:&lt;span th:text="${#httpServletRequest.getAttribute('req')}"&gt;&lt;/span&gt;&lt;br/&gt;Session:&lt;span th:text="${session.sess}"&gt;&lt;/span&gt;&lt;br/&gt;Application:&lt;span th:text="${application.app}"&gt;&lt;/span&gt;</code></pre><p>ä»£ç åœ°å€ï¼š<a href="https://github.com/SerendipityH/SpringBoot" target="_blank" rel="noopener">https://github.com/SerendipityH/SpringBoot</a></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;SpringBootæ•´åˆThymeleaf&quot;&gt;SpringBootæ•´åˆThymeleaf&lt;/h3&gt;
&lt;h3 id=&quot;ThymeleafåŸºæœ¬ä½¿ç”¨&quot;&gt;ThymeleafåŸºæœ¬ä½¿ç”¨&lt;/h3&gt;
&lt;p&gt;1.åœ¨åŸæ¥pomæ–‡ä»¶çš„åŸºç¡€åŠ ä¸Š&lt;/p&gt;
&lt;figure class=&quot;hi
      
    
    </summary>
    
      <category term="SpringBoot" scheme="http://yoursite.com/blog/categories/SpringBoot/"/>
    
    
      <category term="SpringBoot" scheme="http://yoursite.com/blog/tags/SpringBoot/"/>
    
  </entry>
  
  <entry>
    <title>Springè§£æ(1)</title>
    <link href="http://yoursite.com/blog/2019/05/16/Spring%E8%A7%A3%E6%9E%90-1/"/>
    <id>http://yoursite.com/blog/2019/05/16/Springè§£æ-1/</id>
    <published>2019-05-16T11:36:33.000Z</published>
    <updated>2019-05-19T09:47:28.118Z</updated>
    
    <content type="html"><![CDATA[<h3 id="Spring-IOCåº•å±‚åŸç†">Spring IOCåº•å±‚åŸç†</h3><p><a href="https://docs.spring.io/spring/docs/current/spring-framework-reference/core.html#beans" target="_blank" rel="noopener">Springå®˜æ–¹åŸæ–‡</a></p><a id="more"></a><p>Springå®¹å™¨åˆå§‹åŒ–æµç¨‹<br>ApplicationContext å®¹å™¨çš„åˆå§‹åŒ–æµç¨‹ä¸»è¦ç”±AbstractApplicationContext ç±»ä¸­çš„refresh<br>æ–¹æ³•å®ç°</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">@Override</span><br><span class="line">public void refresh() throws BeansException, IllegalStateException {</span><br><span class="line">synchronized (this.startupShutdownMonitor) {</span><br><span class="line">// Prepare this context for refreshing.</span><br><span class="line">prepareRefresh();</span><br><span class="line"></span><br><span class="line">// Tell the subclass to refresh the internal bean factory.</span><br><span class="line">ConfigurableListableBeanFactory beanFactory = obtainFreshBeanFactory();</span><br><span class="line"></span><br><span class="line">// Prepare the bean factory for use in this context.</span><br><span class="line">prepareBeanFactory(beanFactory);</span><br><span class="line"></span><br><span class="line">try {</span><br><span class="line">// Allows post-processing of the bean factory in context subclasses.</span><br><span class="line">postProcessBeanFactory(beanFactory);</span><br><span class="line"></span><br><span class="line">// Invoke factory processors registered as beans in the context.</span><br><span class="line">invokeBeanFactoryPostProcessors(beanFactory);</span><br><span class="line"></span><br><span class="line">// Register bean processors that intercept bean creation.</span><br><span class="line">registerBeanPostProcessors(beanFactory);</span><br><span class="line"></span><br><span class="line">// Initialize message source for this context.</span><br><span class="line">initMessageSource();</span><br><span class="line"></span><br><span class="line">// Initialize event multicaster for this context.</span><br><span class="line">initApplicationEventMulticaster();</span><br><span class="line"></span><br><span class="line">// Initialize other special beans in specific context subclasses.</span><br><span class="line">onRefresh();</span><br><span class="line"></span><br><span class="line">// Check for listener beans and register them.</span><br><span class="line">registerListeners();</span><br><span class="line"></span><br><span class="line">// Instantiate all remaining (non-lazy-init) singletons.</span><br><span class="line">finishBeanFactoryInitialization(beanFactory);</span><br><span class="line"></span><br><span class="line">// Last step: publish corresponding event.</span><br><span class="line">finishRefresh();</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">catch (BeansException ex) {</span><br><span class="line">if (logger.isWarnEnabled()) {</span><br><span class="line">logger.warn("Exception encountered during context initialization - " +</span><br><span class="line">"cancelling refresh attempt: " + ex);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">// Destroy already created singletons to avoid dangling resources.</span><br><span class="line">destroyBeans();</span><br><span class="line"></span><br><span class="line">// Reset 'active' flag.</span><br><span class="line">cancelRefresh(ex);</span><br><span class="line"></span><br><span class="line">// Propagate exception to caller.</span><br><span class="line">throw ex;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">finally {</span><br><span class="line">// Reset common introspection caches in Spring's core, since we</span><br><span class="line">// might not ever need metadata for singleton beans anymore...</span><br><span class="line">resetCommonCaches();</span><br><span class="line">}</span><br><span class="line">}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="ä¸€">ä¸€</h3><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">synchronized (this.startupShutdownMonitor)</span><br></pre></td></tr></tbody></table></figure><p>åœ¨springä¸­ï¼Œæ„å»ºå®¹å™¨çš„è¿‡ç¨‹éƒ½æ˜¯åŒæ­¥çš„ã€‚åŒæ­¥æ“ä½œæ˜¯ä¸ºäº†ä¿è¯å®¹å™¨æ„å»ºè¿‡ç¨‹ä¸­ï¼Œä¸å‡ºç°å¤šçº¿ç¨‹èµ„æºçš„å†²çªé—®é¢˜<br>é€šè¿‡synchronizedåŒæ­¥ä»£ç å—å®ç°</p><h3 id="äºŒ">äºŒ</h3><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// Prepare this context for refreshing.</span><br><span class="line">prepareRefresh();</span><br></pre></td></tr></tbody></table></figure><p>ä¸Šä¸‹æ–‡çš„é¢„åŠ è½½ï¼Œè§£æé…ç½®æ–‡ä»¶</p><h3 id="ä¸‰">ä¸‰</h3><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// Tell the subclass to refresh the internal bean factory.</span><br><span class="line">ConfigurableListableBeanFactory beanFactory = obtainFreshBeanFactory();</span><br></pre></td></tr></tbody></table></figure><p>åˆ›å»ºBeanFactoryã€‚</p><h3 id="å››">å››</h3><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// Prepare the bean factory for use in this context.</span><br><span class="line">prepareBeanFactory(beanFactory);</span><br></pre></td></tr></tbody></table></figure><p>åˆ›å»ºBeanFactoryä¸­ç®¡ç†çš„beanå¯¹è±¡</p><h3 id="äº”">äº”</h3><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// Allows post-processing of the bean factory in context subclasses.</span><br><span class="line">postProcessBeanFactory(beanFactory);</span><br></pre></td></tr></tbody></table></figure><p>åŠ è½½é…ç½®ä¸­BeanFactoryæ— æ³•å¤„ç†çš„å†…å®¹</p><h3 id="å…­">å…­</h3><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// Invoke factory processors registered as beans in the context.</span><br><span class="line">invokeBeanFactoryPostProcessors(beanFactory);</span><br></pre></td></tr></tbody></table></figure><p>å°†ä¸Šä¸€æ­¥åŠ è½½çš„å†…å®¹ï¼Œä½œä¸ºä¸€ä¸ªå®¹å™¨å¯ä»¥ç®¡ç†çš„beanå¯¹è±¡æ³¨å†Œåˆ°ApplicationContext</p><h3 id="ä¸ƒ">ä¸ƒ</h3><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// Register bean processors that intercept bean creation.</span><br><span class="line">registerBeanPostProcessors(beanFactory);</span><br></pre></td></tr></tbody></table></figure><p>æ³¨å†Œbean</p><h3 id="å…«">å…«</h3><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// Initialize message source for this context.</span><br><span class="line">initMessageSource();</span><br></pre></td></tr></tbody></table></figure><p>åˆå§‹åŒ–å›½é™…åŒ–æ¶ˆæ¯æº</p><h3 id="ä¹">ä¹</h3><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// Initialize event multicaster for this context.</span><br><span class="line">initApplicationEventMulticaster();</span><br></pre></td></tr></tbody></table></figure><p>æ³¨å†Œäº‹ä»¶å¤šæ’­ç›‘å¬</p><h3 id="å">å</h3><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// Initialize other special beans in specific context subclasses.</span><br><span class="line">onRefresh();</span><br></pre></td></tr></tbody></table></figure><p>åˆå§‹åŒ–ä¸»é¢˜èµ„æº</p><h3 id="åä¸€">åä¸€</h3><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// Check for listener beans and register them.</span><br><span class="line">registerListeners();</span><br></pre></td></tr></tbody></table></figure><p>åˆ›å»ºç›‘å¬å™¨ï¼Œå¹¶æ³¨å†Œã€‚</p><h3 id="åäºŒ">åäºŒ</h3><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// Instantiate all remaining (non-lazy-init) singletons.</span><br><span class="line">finishBeanFactoryInitialization(beanFactory);</span><br><span class="line">```</span><br><span class="line">åˆå§‹åŒ–é…ç½®ä¸­å‡ºç°çš„æ‰€æœ‰çš„lazy-init=false çš„bean å¯¹è±¡ã€‚</span><br><span class="line">ä¸”bean å¯¹è±¡å¿…é¡»æ˜¯singleton çš„ã€‚</span><br><span class="line"></span><br><span class="line">### åä¸‰</span><br></pre></td></tr></tbody></table></figure><p>// Last step: publish corresponding event.<br>finishRefresh();</p><pre><code>æœ€åä¸€æ­¥ã€‚å‘å¸ƒæœ€ç»ˆäº‹ä»¶</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;Spring-IOCåº•å±‚åŸç†&quot;&gt;Spring IOCåº•å±‚åŸç†&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://docs.spring.io/spring/docs/current/spring-framework-reference/core.html#beans&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Springå®˜æ–¹åŸæ–‡&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Springå­¦ä¹ " scheme="http://yoursite.com/blog/categories/Spring%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="Springæºç " scheme="http://yoursite.com/blog/tags/Spring%E6%BA%90%E7%A0%81/"/>
    
  </entry>
  
  <entry>
    <title>javaé¢˜é›†ï¼ˆ1ï¼‰</title>
    <link href="http://yoursite.com/blog/2019/04/23/java%E9%A2%98%E9%9B%86(1)/"/>
    <id>http://yoursite.com/blog/2019/04/23/javaé¢˜é›†(1)/</id>
    <published>2019-04-23T12:34:35.000Z</published>
    <updated>2019-05-15T15:11:01.163Z</updated>
    
    <content type="html"><![CDATA[<p>1.è¿›ç¨‹ä¸çº¿ç¨‹çš„åŒºåˆ«ä¸è”ç³»<br>è¿›ç¨‹æ˜¯ç¨‹åºè¿è¡Œå’Œèµ„æºåˆ†é…çš„åŸºæœ¬å•ä½ï¼Œä¸€ä¸ªç¨‹åºè‡³å°‘æœ‰ä¸€ä¸ªè¿›ç¨‹ï¼Œä¸€ä¸ªè¿›ç¨‹è‡³å°‘æœ‰ä¸€ä¸ªçº¿ç¨‹ã€‚<br>è¿›ç¨‹åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­æ‹¥æœ‰ç‹¬ç«‹çš„å†…å­˜å•å…ƒï¼Œè€Œå¤šä¸ªçº¿ç¨‹å…±äº«å†…å­˜èµ„æºï¼Œå‡å°‘åˆ‡æ¢æ¬¡æ•°ï¼Œä»è€Œæ•ˆç‡æ›´é«˜ã€‚<br>çº¿ç¨‹æ˜¯è¿›ç¨‹çš„ä¸€ä¸ªå®ä½“ï¼Œæ˜¯cpuè°ƒåº¦å’Œåˆ†æ´¾çš„åŸºæœ¬å•ä½ï¼Œæ˜¯æ¯”ç¨‹åºæ›´å°çš„èƒ½ç‹¬ç«‹è¿è¡Œçš„åŸºæœ¬å•ä½ã€‚<br>åŒä¸€è¿›ç¨‹ä¸­çš„å¤šä¸ªçº¿ç¨‹ä¹‹é—´å¯ä»¥å¹¶å‘æ‰§è¡Œã€‚</p><p>2.è¿›ç¨‹çš„åˆ‡æ¢è¿‡ç¨‹<br>ä½¿ç”¨æ—¶é—´ç‰‡è½®æ¢çš„æ–¹å¼ï¼ŒCPUç»™æ¯ä¸ªä»»åŠ¡éƒ½æœåŠ¡ä¸€å®šçš„æ—¶é—´ï¼Œç„¶åæŠŠå½“å‰ä»»åŠ¡çš„çŠ¶æ€ä¿å­˜ä¸‹æ¥ï¼Œåœ¨åŠ è½½ä¸‹ä¸€ä»»åŠ¡çš„çŠ¶æ€åï¼Œ<br>ç»§ç»­æœåŠ¡ä¸‹ä¸€ä»»åŠ¡ï¼Œä»»åŠ¡çš„çŠ¶æ€ä¿å­˜åŠå†åŠ è½½ï¼Œè¿™æ®µè¿‡ç¨‹å°±å«åšä¸Šä¸‹æ–‡åˆ‡æ¢ã€‚</p><p>3.TCPå»ºè”çš„ä¸‰æ¬¡æ¡æ‰‹<br>ç¬¬ä¸€æ¬¡:å®¢æˆ·ç«¯å‘é€ä½ç synåˆ°æœåŠ¡å™¨ï¼Œå¹¶è¿›å…¥SYN_SENTçŠ¶æ€ï¼Œç­‰å¾…æœåŠ¡å™¨ç¡®è®¤ï¼›<br>ç¬¬äºŒæ¬¡:æœåŠ¡å™¨æ”¶åˆ°synåŒ…ååŒæ„å»ºç«‹è¿æ¥ï¼Œå‘å®¢æˆ·ç«¯å‘é€ä¸€ä¸ªackï¼ŒåŒæ—¶è‡ªå·±ä¹Ÿå‘é€ä¸€ä¸ªsynåŒ…ï¼Œæ­¤æ—¶æœåŠ¡å™¨è¿›å…¥SYN_RECVçŠ¶æ€ï¼›<br>ç¬¬ä¸‰æ¬¡:å®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡å™¨çš„ackåè¿›å…¥ESTABLISHEDçŠ¶æ€ï¼ŒåŒæ—¶å‘æœåŠ¡å™¨ackå“åº”ï¼ŒæœåŠ¡å™¨æ”¶åˆ°åç¡®è®¤ä¹Ÿè¿›å…¥ESTABLISHEDçŠ¶æ€ï¼Œå®Œæˆä¸‰æ¬¡æ¡æ‰‹ã€‚</p><p>ä¸ºäº†å®ç°å¯é æ•°æ®ä¼ è¾“ï¼Œ TCP åè®®çš„é€šä¿¡åŒæ–¹ï¼Œ éƒ½å¿…é¡»ç»´æŠ¤ä¸€ä¸ªåºåˆ—å·ï¼Œ ä»¥æ ‡è¯†å‘é€å‡ºå»çš„æ•°æ®åŒ…ä¸­ï¼Œ å“ªäº›æ˜¯å·²ç»è¢«å¯¹æ–¹æ”¶åˆ°çš„ã€‚ ä¸‰æ¬¡æ¡æ‰‹çš„è¿‡ç¨‹å³æ˜¯é€šä¿¡åŒæ–¹ç›¸äº’å‘ŠçŸ¥åºåˆ—å·èµ·å§‹å€¼ï¼Œ å¹¶ç¡®è®¤å¯¹æ–¹å·²ç»æ”¶åˆ°äº†åºåˆ—å·èµ·å§‹å€¼çš„å¿…ç»æ­¥éª¤ã€‚<br>ä¸‰æ¬¡æ¡æ‰‹å°±æ˜¯ä¸ºäº†å»ºç«‹åŒå‘é“¾æ¥ã€‚</p><p>4.TCPå››æ¬¡æŒ¥æ‰‹<br>TCPå»ºç«‹è¿æ¥è¦è¿›è¡Œä¸‰æ¬¡æ¡æ‰‹ï¼Œè€Œæ–­å¼€è¿æ¥è¦è¿›è¡Œå››æ¬¡ã€‚è¿™æ˜¯ç”±äºTCPçš„åŠå…³é—­é€ æˆçš„ã€‚å› ä¸ºTCPè¿æ¥æ˜¯å…¨åŒå·¥çš„(å³æ•°æ®å¯åœ¨ä¸¤ä¸ªæ–¹å‘ä¸ŠåŒæ—¶ä¼ é€’)æ‰€ä»¥è¿›è¡Œå…³é—­æ—¶æ¯ä¸ªæ–¹å‘ä¸Šéƒ½è¦å•ç‹¬è¿›è¡Œå…³é—­ã€‚è¿™ä¸ªå•æ–¹å‘çš„å…³é—­å°±å«åŠå…³é—­ã€‚å½“ä¸€æ–¹å®Œæˆå®ƒçš„æ•°æ®å‘é€ä»»åŠ¡ï¼Œå°±å‘é€ä¸€ä¸ªFINæ¥å‘å¦ä¸€æ–¹é€šå‘Šå°†è¦ç»ˆæ­¢è¿™ä¸ªæ–¹å‘çš„è¿æ¥ã€‚</p><p>5.ä¸€æ¬¡å®Œæ•´çš„Httpè¯·æ±‚<br>1.åœ°å€è§£æï¼šå¦‚æœå®¢æˆ·ç«¯æµè§ˆå™¨è¯·æ±‚è¿™ä¸ªé¡µé¢ <a href="http://localhost:8080/index.html%E4%BB%8E%E4%B8%AD%E5%88%86%E8%A7%A3%E5%87%BA%E5%8D%8F%E8%AE%AE%E5%90%8D%E3%80%81%E4%B8%BB%E6%9C%BA%E5%90%8D%E3%80%81%E7%AB%AF%E5%8F%A3%E3%80%81%E5%AF%B9%E8%B1%A1%E8%B7%AF%E5%BE%84%E7%AD%89%E9%83%A8%E5%88%86%EF%BC%8C%E8%A7%A3%E6%9E%90%E5%BE%97%E5%88%B0%E7%9A%84%E7%BB%93%E6%9E%9C%E5%A6%82%E4%B8%8B%EF%BC%9A" target="_blank" rel="noopener">http://localhost:8080/index.htmlä»ä¸­åˆ†è§£å‡ºåè®®åã€ä¸»æœºåã€ç«¯å£ã€å¯¹è±¡è·¯å¾„ç­‰éƒ¨åˆ†ï¼Œè§£æå¾—åˆ°çš„ç»“æœå¦‚ä¸‹ï¼š</a><br>åè®®åï¼šhttp<br>ä¸»æœºåï¼šlocalhost<br>ç«¯å£ï¼š8080<br>å¯¹è±¡è·¯å¾„ï¼š/index.html<br>åœ¨è¿™ä¸€æ­¥ï¼Œéœ€è¦åŸŸåç³»ç»ŸDNSè§£æåŸŸålocalhostï¼Œå¾—åˆ°ä¸»æœºçš„IPåœ°å€ã€‚</p><p>2.å°è£…HTTPè¯·æ±‚æ•°æ®åŒ…ï¼šæŠŠä»¥ä¸Šéƒ¨åˆ†ç»“åˆæœ¬æœºè‡ªå·±çš„ä¿¡æ¯ï¼Œå°è£…æˆä¸€ä¸ªHTTPè¯·æ±‚æ•°æ®åŒ…<br>3.å°è£…æˆTCPåŒ…ï¼Œå»ºç«‹TCPè¿æ¥ï¼ˆTCPçš„ä¸‰æ¬¡æ¡æ‰‹ï¼‰<br>4.å®¢æˆ·æœºå‘é€è¯·æ±‚å‘½ä»¤ï¼šå»ºç«‹è¿æ¥åï¼Œå®¢æˆ·æœºå‘é€ä¸€ä¸ªè¯·æ±‚ç»™æœåŠ¡å™¨ï¼Œè¯·æ±‚æ–¹å¼çš„æ ¼å¼ä¸ºï¼šç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦ï¼ˆURLï¼‰ã€åè®®ç‰ˆæœ¬å·ï¼Œåè¾¹æ˜¯MIMEä¿¡æ¯åŒ…æ‹¬è¯·æ±‚ä¿®é¥°ç¬¦ã€å®¢æˆ·æœºä¿¡æ¯å’Œå¯å†…å®¹ã€‚<br>5.æœåŠ¡å™¨å“åº”ï¼šæœåŠ¡å™¨æ¥åˆ°è¯·æ±‚åï¼Œç»™äºˆç›¸åº”çš„å“åº”ä¿¡æ¯ï¼Œå…¶æ ¼å¼ä¸ºä¸€ä¸ªçŠ¶æ€è¡Œï¼ŒåŒ…æ‹¬ä¿¡æ¯çš„åè®®ç‰ˆæœ¬å·ã€ä¸€ä¸ªæˆåŠŸæˆ–é”™è¯¯çš„ä»£ç ï¼Œåè¾¹æ˜¯MIMEä¿¡æ¯åŒ…æ‹¬æœåŠ¡å™¨ä¿¡æ¯ã€å®ä½“ä¿¡æ¯å’Œå¯èƒ½çš„å†…å®¹ã€‚<br>6.æœåŠ¡å™¨å…³é—­TCPè¿æ¥ï¼šä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¸€æ—¦WebæœåŠ¡å™¨å‘æµè§ˆå™¨å‘é€äº†è¯·æ±‚æ•°æ®ï¼Œå®ƒå°±è¦å…³é—­TCPè¿æ¥ï¼Œç„¶åå¦‚æœæµè§ˆå™¨æˆ–è€…æœåŠ¡å™¨åœ¨å…¶å¤´ä¿¡æ¯åŠ å…¥äº†è¿™è¡Œä»£ç Connection:keep-aliveï¼ŒTCPè¿æ¥åœ¨å‘é€åå°†ä»ç„¶ä¿æŒæ‰“å¼€çŠ¶æ€ï¼Œäºæ˜¯ï¼Œæµè§ˆå™¨å¯ä»¥ç»§ç»­é€šè¿‡ç›¸åŒçš„è¿æ¥å‘é€è¯·æ±‚ã€‚ä¿æŒè¿æ¥èŠ‚çœäº†ä¸ºæ¯ä¸ªè¯·æ±‚å»ºç«‹æ–°è¿æ¥æ‰€éœ€çš„æ—¶é—´ï¼Œè¿˜èŠ‚çº¦äº†ç½‘ç»œå¸¦å®½ã€‚</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;1.è¿›ç¨‹ä¸çº¿ç¨‹çš„åŒºåˆ«ä¸è”ç³»&lt;br&gt;
è¿›ç¨‹æ˜¯ç¨‹åºè¿è¡Œå’Œèµ„æºåˆ†é…çš„åŸºæœ¬å•ä½ï¼Œä¸€ä¸ªç¨‹åºè‡³å°‘æœ‰ä¸€ä¸ªè¿›ç¨‹ï¼Œä¸€ä¸ªè¿›ç¨‹è‡³å°‘æœ‰ä¸€ä¸ªçº¿ç¨‹ã€‚&lt;br&gt;
è¿›ç¨‹åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­æ‹¥æœ‰ç‹¬ç«‹çš„å†…å­˜å•å…ƒï¼Œè€Œå¤šä¸ªçº¿ç¨‹å…±äº«å†…å­˜èµ„æºï¼Œå‡å°‘åˆ‡æ¢æ¬¡æ•°ï¼Œä»è€Œæ•ˆç‡æ›´é«˜ã€‚&lt;br&gt;
çº¿ç¨‹æ˜¯è¿›ç¨‹çš„ä¸€ä¸ªå®ä½“ï¼Œæ˜¯cpuè°ƒåº¦å’Œåˆ†æ´¾çš„åŸºæœ¬
      
    
    </summary>
    
      <category term="Javaé¢˜é›†" scheme="http://yoursite.com/blog/categories/Java%E9%A2%98%E9%9B%86/"/>
    
    
      <category term="Javaç¯‡" scheme="http://yoursite.com/blog/tags/Java%E7%AF%87/"/>
    
  </entry>
  
  <entry>
    <title>SpringBootå­¦ä¹ ï¼ˆ4ï¼‰</title>
    <link href="http://yoursite.com/blog/2019/04/16/SpringBoot%E5%AD%A6%E4%B9%A0%20%20(4)/"/>
    <id>http://yoursite.com/blog/2019/04/16/SpringBootå­¦ä¹   (4)/</id>
    <published>2019-04-16T13:59:43.000Z</published>
    <updated>2019-04-17T13:21:10.655Z</updated>
    
    <content type="html"><![CDATA[<h3 id="SpringBootè®¿é—®é™æ€èµ„æº">SpringBootè®¿é—®é™æ€èµ„æº</h3><h4 id="SpringBootä»classpathä¸‹è®¿é—®">SpringBootä»classpathä¸‹è®¿é—®</h4><p>ç›®å½•åç§°å¿…é¡»ä¸ºstatic<br><img src="/images/SpringBoot/SpringBoot7.bmp" alt=""><br><img src="/images/SpringBoot/SpringBoot8.bmp" alt=""></p><h4 id="ServletContextæ ¹ç›®å½•">ServletContextæ ¹ç›®å½•</h4><p>åœ¨src/main/webapp ç›®å½•åç§°å¿…é¡»ä¸ºwebapp<br>æ²¡æœ‰å°±æ–°å»ºä¸€ä¸ª<br><img src="/images/SpringBoot/SpringBoot9.bmp" alt=""></p><h3 id="SpringBoot-è®¾ç½®ä¸Šä¼ æ–‡ä»¶å¤§å°çš„é»˜è®¤å€¼">SpringBoot è®¾ç½®ä¸Šä¼ æ–‡ä»¶å¤§å°çš„é»˜è®¤å€¼</h3><p>éœ€è¦æ·»åŠ ä¸€ä¸ªSpringBootçš„é…ç½®æ–‡ä»¶<br>application.properties<br><img src="/images/SpringBoot/SpringBoot10.bmp" alt=""></p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è®¾ç½®å•ä¸ªä¸Šä¼ æ–‡ä»¶çš„å¤§å°</span><br><span class="line">spring.http.multipart.maxFileSize=200MB</span><br></pre></td></tr></tbody></table></figure><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è®¾ç½®ä¸€æ¬¡è¯·æ±‚ä¸Šä¼ æ–‡ä»¶çš„æ€»å®¹é‡</span><br><span class="line">spring.http.multipart.maxRequestSize=200MB</span><br></pre></td></tr></tbody></table></figure><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;SpringBootè®¿é—®é™æ€èµ„æº&quot;&gt;SpringBootè®¿é—®é™æ€èµ„æº&lt;/h3&gt;
&lt;h4 id=&quot;SpringBootä»classpathä¸‹è®¿é—®&quot;&gt;SpringBootä»classpathä¸‹è®¿é—®&lt;/h4&gt;
&lt;p&gt;ç›®å½•åç§°å¿…é¡»ä¸ºstatic&lt;br&gt;
&lt;img src=
      
    
    </summary>
    
      <category term="SpringBoot" scheme="http://yoursite.com/blog/categories/SpringBoot/"/>
    
    
      <category term="SpringBoot" scheme="http://yoursite.com/blog/tags/SpringBoot/"/>
    
  </entry>
  
  <entry>
    <title>JVMå­¦ä¹ ï¼ˆ3ï¼‰</title>
    <link href="http://yoursite.com/blog/2019/04/14/JVM%E5%AD%A6%E4%B9%A0(3)/"/>
    <id>http://yoursite.com/blog/2019/04/14/JVMå­¦ä¹ (3)/</id>
    <published>2019-04-14T11:01:40.000Z</published>
    <updated>2019-05-15T15:06:05.628Z</updated>
    
    <content type="html"><![CDATA[<h3 id="Javaä¸­éƒ½æœ‰å“ªäº›å¼•ç”¨ç±»å‹">Javaä¸­éƒ½æœ‰å“ªäº›å¼•ç”¨ç±»å‹</h3><p>Javaä¸­æœ‰å››ç§å¼•ç”¨ç±»å‹ï¼šå¼ºå¼•ç”¨ã€è½¯å¼•ç”¨ã€å¼±å¼•ç”¨ã€è™šå¼•ç”¨</p><h4 id="å¼ºå¼•ç”¨">å¼ºå¼•ç”¨</h4><p>åœ¨Javaä¸­æœ€å¸¸è§çš„å°±æ˜¯å¼ºå¼•ç”¨ï¼ŒæŠŠä¸€ä¸ªå¯¹è±¡èµ‹ç»™ä¸€ä¸ªå¼•ç”¨å˜é‡ï¼Œè¿™ä¸ªå¼•ç”¨å˜é‡å°±æ˜¯ä¸€ä¸ªå¼ºå¼•ç”¨ã€‚å½“ä¸€ä¸ªå¯¹è±¡è¢«å¼ºå¼•ç”¨å˜é‡å¼•ç”¨æ—¶ï¼Œå®ƒå¤„äºå¯è¾¾çŠ¶æ€ï¼Œå®ƒæ˜¯ä¸å¯èƒ½è¢«åƒåœ¾å›æ”¶æœºåˆ¶å›æ”¶çš„ï¼Œå³ä½¿è¯¥å¯¹è±¡ä»¥åæ°¸è¿œéƒ½ä¸ä¼šè¢«ç”¨åˆ°JVMä¹Ÿä¸ä¼šå›æ”¶ã€‚å› æ­¤å¼ºå¼•ç”¨æ˜¯é€ æˆJavaå†…å­˜æ³„æ¼çš„ä¸»è¦åŸå› ä¹‹ä¸€ã€‚</p><h4 id="è½¯å¼•ç”¨">è½¯å¼•ç”¨</h4><p>è½¯å¼•ç”¨éœ€è¦ç”¨SoftReferenceç±»æ¥å®ç°ï¼Œå¯¹äºåªæœ‰è½¯å¼•ç”¨çš„å¯¹è±¡æ¥è¯´ï¼Œå½“ç³»ç»Ÿå†…å­˜è¶³å¤Ÿæ—¶å®ƒä¸ä¼šè¢«å›æ”¶ï¼Œå½“ç³»ç»Ÿå†…å­˜ç©ºé—´ä¸è¶³æ—¶å®ƒä¼šè¢«å›æ”¶ã€‚è½¯å¼•ç”¨é€šå¸¸ç”¨åœ¨å¯¹å†…å­˜æ•æ„Ÿçš„ç¨‹åºä¸­ã€‚</p><h4 id="å¼±å¼•ç”¨">å¼±å¼•ç”¨</h4><p>å¼±å¼•ç”¨éœ€è¦ç”¨WeakReferenceç±»æ¥å®ç°ï¼Œå®ƒæ¯”è½¯å¼•ç”¨çš„ç”Ÿå­˜æœŸæ›´çŸ­ï¼Œå¯¹äºåªæœ‰å¼±å¼•ç”¨çš„å¯¹è±¡æ¥è¯´ï¼Œåªè¦åƒåœ¾å›æ”¶æœºåˆ¶ä¸€è¿è¡Œï¼Œä¸ç®¡JVMçš„å†…å­˜ç©ºé—´æ˜¯å¦è¶³å¤Ÿï¼Œæ€»ä¼šå›æ”¶è¯¥å¯¹è±¡å ç”¨çš„å†…å­˜ã€‚</p><h4 id="è™šå¼•ç”¨">è™šå¼•ç”¨</h4><p>è™šå¼•ç”¨éœ€è¦PhantomReferenceç±»æ¥å®ç°ï¼Œå®ƒä¸èƒ½å•ç‹¬ä½¿ç”¨ï¼Œå¿…é¡»å’Œå¼•ç”¨é˜Ÿåˆ—è”åˆä½¿ç”¨ã€‚è™šå¼•ç”¨çš„ä¸»è¦ä½œç”¨æ˜¯è·Ÿè¸ªå¯¹è±¡è¢«åƒåœ¾å›æ”¶çš„çŠ¶æ€ã€‚</p><h3 id="jvmçš„åƒåœ¾å›æ”¶ç®—æ³•">jvmçš„åƒåœ¾å›æ”¶ç®—æ³•</h3><h4 id="æ ‡è®°æ¸…é™¤ç®—æ³•ï¼ˆMark-Sweepï¼‰">æ ‡è®°æ¸…é™¤ç®—æ³•ï¼ˆMark-Sweepï¼‰</h4><p>æœ€åŸºç¡€çš„åƒåœ¾å›æ”¶ç®—æ³•ï¼Œåˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼Œæ ‡æ³¨å’Œæ¸…é™¤ã€‚æ ‡è®°é˜¶æ®µæ ‡è®°å‡ºæ‰€æœ‰éœ€è¦å›æ”¶çš„å¯¹è±¡ï¼Œæ¸…é™¤é˜¶æ®µå›æ”¶è¢«æ ‡è®°çš„å¯¹è±¡æ‰€å ç”¨çš„ç©ºé—´ã€‚å¦‚å›¾<br><img src="/images/java/jvm/jvm2.bmp" alt=""><br>ã€€ã€€ä»å›¾ä¸­æˆ‘ä»¬å°±å¯ä»¥å‘ç°ï¼Œè¯¥ç®—æ³•æœ€å¤§çš„é—®é¢˜æ˜¯å†…å­˜ç¢ç‰‡åŒ–ä¸¥é‡ï¼Œåç»­å¯èƒ½å‘ç”Ÿå¤§å¯¹è±¡ä¸èƒ½æ‰¾åˆ°å¯åˆ©ç”¨ç©ºé—´çš„é—®é¢˜ã€‚</p><h4 id="å¤åˆ¶ç®—æ³•-copying">å¤åˆ¶ç®—æ³•(copying)</h4><p>ä¸ºäº†è§£å†³Mark-Sweepç®—æ³•å†…å­˜ç¢ç‰‡åŒ–çš„ç¼ºé™·è€Œè¢«æå‡ºçš„ç®—æ³•ã€‚æŒ‰å†…å­˜å®¹é‡å°†å†…å­˜åˆ’åˆ†ä¸ºç­‰å¤§å°çš„ä¸¤å—ã€‚æ¯æ¬¡åªä½¿ç”¨å…¶ä¸­ä¸€å—ï¼Œå½“è¿™ä¸€å—å†…å­˜æ»¡åå°†å°šå­˜æ´»çš„å¯¹è±¡å¤åˆ¶åˆ°å¦ä¸€å—ä¸Šå»ï¼ŒæŠŠå·²ä½¿ç”¨çš„å†…å­˜æ¸…æ‰ï¼Œå¦‚å›¾ï¼š<br><img src="/images/java/jvm/jvm3.bmp" alt=""><br>ã€€ã€€è¿™ç§ç®—æ³•è™½ç„¶å®ç°ç®€å•ï¼Œå†…å­˜æ•ˆç‡é«˜ï¼Œä¸æ˜“äº§ç”Ÿç¢ç‰‡ï¼Œä½†æ˜¯æœ€å¤§çš„é—®é¢˜æ˜¯å¯ç”¨å†…å­˜è¢«å‹ç¼©åˆ°äº†åŸæœ¬çš„ä¸€åŠã€‚ä¸”å­˜æ´»å¯¹è±¡å¢å¤šçš„è¯ï¼ŒCopyingç®—æ³•çš„æ•ˆç‡ä¼šå¤§å¤§é™ä½ã€‚</p><h4 id="æ ‡è®°æ•´ç†ç®—æ³•-Mark-Compact">æ ‡è®°æ•´ç†ç®—æ³•(Mark-Compact)</h4><p>ç»“åˆäº†ä»¥ä¸Šä¸¤ä¸ªç®—æ³•ï¼Œä¸ºäº†é¿å…ç¼ºé™·è€Œæå‡ºã€‚æ ‡è®°é˜¶æ®µå’ŒMark-Sweepç®—æ³•ç›¸åŒï¼Œæ ‡è®°åä¸æ˜¯æ¸…ç†å¯¹è±¡ï¼Œè€Œæ˜¯å°†å­˜æ´»å¯¹è±¡ç§»å‘å†…å­˜çš„ä¸€ç«¯ã€‚ç„¶åæ¸…é™¤ç«¯è¾¹ç•Œå¤–çš„å¯¹è±¡ã€‚å¦‚å›¾ï¼š<br><img src="/images/java/jvm/jvm4.bmp" alt=""></p><h4 id="åˆ†ä»£æ”¶é›†ç®—æ³•">åˆ†ä»£æ”¶é›†ç®—æ³•</h4><p>åˆ†ä»£æ”¶é›†æ³•æ˜¯ç›®å‰å¤§éƒ¨åˆ†JVMæ‰€é‡‡ç”¨çš„æ–¹æ³•ï¼Œå…¶æ ¸å¿ƒæ€æƒ³æ˜¯æ ¹æ®å¯¹è±¡å­˜æ´»çš„ä¸åŒç”Ÿå‘½å‘¨æœŸå°†å†…å­˜åˆ’åˆ†ä¸ºä¸åŒçš„åŸŸï¼Œä¸€èˆ¬æƒ…å†µä¸‹å°†GCå †åˆ’åˆ†ä¸ºè€ç”Ÿä»£(Tenured/Old Generation)å’Œæ–°ç”Ÿä»£(Young Generation)ã€‚è€ç”Ÿä»£çš„ç‰¹ç‚¹æ˜¯æ¯æ¬¡åƒåœ¾å›æ”¶æ—¶åªæœ‰å°‘é‡å¯¹è±¡éœ€è¦è¢«å›æ”¶ï¼Œæ–°ç”Ÿä»£çš„ç‰¹ç‚¹æ˜¯æ¯æ¬¡åƒåœ¾å›æ”¶æ—¶éƒ½æœ‰å¤§é‡åƒåœ¾éœ€è¦è¢«å›æ”¶ï¼Œå› æ­¤å¯ä»¥æ ¹æ®ä¸åŒåŒºåŸŸé€‰æ‹©ä¸åŒçš„ç®—æ³•ã€‚<br>ã€€ã€€ç›®å‰å¤§éƒ¨åˆ†JVMçš„GCå¯¹äºæ–°ç”Ÿä»£éƒ½é‡‡å–Copyingç®—æ³•ï¼Œå› ä¸ºæ–°ç”Ÿä»£ä¸­æ¯æ¬¡åƒåœ¾å›æ”¶éƒ½è¦å›æ”¶å¤§éƒ¨åˆ†å¯¹è±¡ï¼Œå³è¦å¤åˆ¶çš„æ“ä½œæ¯”è¾ƒå°‘ï¼Œä½†é€šå¸¸å¹¶ä¸æ˜¯æŒ‰ç…§1ï¼š1æ¥åˆ’åˆ†æ–°ç”Ÿä»£ã€‚ä¸€èˆ¬å°†æ–°ç”Ÿä»£åˆ’åˆ†ä¸ºä¸€å—è¾ƒå¤§çš„Edenç©ºé—´å’Œä¸¤ä¸ªè¾ƒå°çš„Survivorç©ºé—´(From Space, To Space)ï¼Œæ¯æ¬¡ä½¿ç”¨Edenç©ºé—´å’Œå…¶ä¸­çš„ä¸€å—Survivorç©ºé—´ï¼Œå½“è¿›è¡Œå›æ”¶æ—¶ï¼Œå°†è¯¥ä¸¤å—ç©ºé—´ä¸­è¿˜å­˜æ´»çš„å¯¹è±¡å¤åˆ¶åˆ°å¦ä¸€å—Survivorç©ºé—´ä¸­ã€‚<br><img src="/images/java/jvm/jvm5.bmp" alt=""><br>ã€€ã€€è€Œè€ç”Ÿä»£å› ä¸ºæ¯æ¬¡åªå›æ”¶å°‘é‡å¯¹è±¡ï¼Œå› è€Œé‡‡ç”¨Mark-Compactç®—æ³•ã€‚å¦å¤–ï¼Œä¸è¦å¿˜è®°åœ¨JavaåŸºç¡€ï¼šJavaè™šæ‹Ÿæœº(JVM)ä¸­æåˆ°è¿‡çš„å¤„äºæ–¹æ³•åŒºçš„æ°¸ç”Ÿä»£(Permanet Generation)ã€‚å®ƒç”¨æ¥å­˜å‚¨classç±»ï¼Œå¸¸é‡ï¼Œæ–¹æ³•æè¿°ç­‰ã€‚å¯¹æ°¸ç”Ÿä»£çš„å›æ”¶ä¸»è¦åŒ…æ‹¬åºŸå¼ƒå¸¸é‡å’Œæ— ç”¨çš„ç±»ã€‚å¯¹è±¡çš„å†…å­˜åˆ†é…ä¸»è¦åœ¨æ–°ç”Ÿä»£çš„Eden Spaceå’ŒSurvivor Spaceçš„From Space(Survivorç›®å‰å­˜æ”¾å¯¹è±¡çš„é‚£ä¸€å—)ï¼Œå°‘æ•°æƒ…å†µä¼šç›´æ¥åˆ†é…åˆ°è€ç”Ÿä»£ã€‚å½“æ–°ç”Ÿä»£çš„Eden Spaceå’ŒFrom Spaceç©ºé—´ä¸è¶³æ—¶å°±ä¼šå‘ç”Ÿä¸€æ¬¡GCï¼Œè¿›è¡ŒGCåï¼ŒEden Spaceå’ŒFrom SpaceåŒºçš„å­˜æ´»å¯¹è±¡ä¼šè¢«æŒªåˆ°To Spaceï¼Œç„¶åå°†Eden Spaceå’ŒFrom Spaceè¿›è¡Œæ¸…ç†ã€‚å¦‚æœTo Spaceæ— æ³•è¶³å¤Ÿå­˜å‚¨æŸä¸ªå¯¹è±¡ï¼Œåˆ™å°†è¿™ä¸ªå¯¹è±¡å­˜å‚¨åˆ°è€ç”Ÿä»£ã€‚åœ¨è¿›è¡ŒGCåï¼Œä½¿ç”¨çš„ä¾¿æ˜¯Eden Spaceå’ŒTo Spaceäº†ï¼Œå¦‚æ­¤åå¤å¾ªç¯ã€‚å½“å¯¹è±¡åœ¨SurvivoråŒºèº²è¿‡ä¸€æ¬¡GCåï¼Œå…¶å¹´é¾„å°±ä¼š+1ã€‚é»˜è®¤æƒ…å†µä¸‹å¹´é¾„åˆ°è¾¾15çš„å¯¹è±¡ä¼šè¢«ç§»åˆ°è€ç”Ÿä»£ä¸­ã€‚</p><h3 id="jvmåƒåœ¾æ”¶é›†å™¨">jvmåƒåœ¾æ”¶é›†å™¨</h3><p>Javaå †å†…å­˜è¢«åˆ’åˆ†ä¸ºæ–°ç”Ÿä»£å’Œå¹´è€ä»£ä¸¤éƒ¨åˆ†ï¼Œæ–°ç”Ÿä»£ä¸»è¦ä½¿ç”¨å¤åˆ¶å’Œæ ‡è®°-æ¸…é™¤åƒåœ¾å›æ”¶ç®—æ³•ï¼Œå¹´è€ä»£ä¸»è¦ä½¿ç”¨æ ‡è®°-æ•´ç†åƒåœ¾å›æ”¶ç®—æ³•ï¼Œå› æ­¤javaè™šæ‹Ÿä¸­é’ˆå¯¹æ–°ç”Ÿä»£å’Œå¹´è€ä»£åˆ†åˆ«æä¾›äº†å¤šç§ä¸åŒçš„åƒåœ¾æ”¶é›†å™¨<br><img src="/images/java/jvm/jvm6.bmp" alt=""></p><h4 id="Serialåƒåœ¾æ”¶é›†å™¨">Serialåƒåœ¾æ”¶é›†å™¨</h4><p>Serialæ˜¯æœ€åŸºæœ¬åƒåœ¾æ”¶é›†å™¨ï¼Œä½¿ç”¨å¤åˆ¶ç®—æ³•ï¼Œæ›¾ç»æ˜¯JDK1.3.1ä¹‹å‰æ–°ç”Ÿä»£å”¯ä¸€çš„åƒåœ¾æ”¶é›†å™¨ã€‚Serialæ˜¯ä¸€ä¸ªå•çº¿ç¨‹çš„æ”¶é›†å™¨ï¼Œå®ƒä¸ä»…ä»…åªä¼šä½¿ç”¨ä¸€ä¸ªCPUæˆ–ä¸€æ¡çº¿ç¨‹å»å®Œæˆåƒåœ¾æ”¶é›†å·¥ä½œï¼Œå¹¶ä¸”åœ¨è¿›è¡Œåƒåœ¾æ”¶é›†çš„åŒæ—¶ï¼Œå¿…é¡»æš‚åœå…¶ä»–æ‰€æœ‰çš„å·¥ä½œçº¿ç¨‹ï¼Œç›´åˆ°åƒåœ¾æ”¶é›†ç»“æŸã€‚<br>ã€€ã€€Serialåƒåœ¾æ”¶é›†å™¨è™½ç„¶åœ¨æ”¶é›†åƒåœ¾è¿‡ç¨‹ä¸­éœ€è¦æš‚åœæ‰€æœ‰å…¶ä»–çš„å·¥ä½œçº¿ç¨‹ï¼Œä½†æ˜¯å®ƒç®€å•é«˜æ•ˆï¼Œå¯¹äºé™å®šå•ä¸ªCPUç¯å¢ƒæ¥è¯´ï¼Œæ²¡æœ‰çº¿ç¨‹äº¤äº’çš„å¼€é”€ï¼Œå¯ä»¥è·å¾—æœ€é«˜çš„å•çº¿ç¨‹åƒåœ¾æ”¶é›†æ•ˆç‡ï¼Œå› æ­¤Serialåƒåœ¾æ”¶é›†å™¨ä¾ç„¶æ˜¯javaè™šæ‹Ÿæœºè¿è¡Œåœ¨Clientæ¨¡å¼ä¸‹é»˜è®¤çš„æ–°ç”Ÿä»£åƒåœ¾æ”¶é›†å™¨ã€‚</p><h4 id="ParNewåƒåœ¾æ”¶é›†å™¨">ParNewåƒåœ¾æ”¶é›†å™¨</h4><p>ParNewåƒåœ¾æ”¶é›†å™¨å…¶å®æ˜¯Serialæ”¶é›†å™¨çš„å¤šçº¿ç¨‹ç‰ˆæœ¬ï¼Œä¹Ÿä½¿ç”¨å¤åˆ¶ç®—æ³•ï¼Œé™¤äº†ä½¿ç”¨å¤šçº¿ç¨‹è¿›è¡Œåƒåœ¾æ”¶é›†ä¹‹å¤–ï¼Œå…¶ä½™çš„è¡Œä¸ºå’ŒSerialæ”¶é›†å™¨å®Œå…¨ä¸€æ ·ï¼ŒParNewåƒåœ¾æ”¶é›†å™¨åœ¨åƒåœ¾æ”¶é›†è¿‡ç¨‹ä¸­åŒæ ·ä¹Ÿè¦æš‚åœæ‰€æœ‰å…¶ä»–çš„å·¥ä½œçº¿ç¨‹ã€‚<br>ã€€ã€€ParNewæ”¶é›†å™¨é»˜è®¤å¼€å¯å’ŒCPUæ•°ç›®ç›¸åŒçš„çº¿ç¨‹æ•°ï¼Œå¯ä»¥é€šè¿‡-XX:ParallelGCThreadså‚æ•°æ¥é™åˆ¶åƒåœ¾æ”¶é›†å™¨çš„çº¿ç¨‹æ•°ã€‚<br>ã€€ã€€ParNewè™½ç„¶æ˜¯é™¤äº†å¤šçº¿ç¨‹å¤–å’ŒSerialæ”¶é›†å™¨å‡ ä¹å®Œå…¨ä¸€æ ·ï¼Œä½†æ˜¯ParNewåƒåœ¾æ”¶é›†å™¨æ˜¯å¾ˆå¤šjavaè™šæ‹Ÿæœºè¿è¡Œåœ¨Serveræ¨¡å¼ä¸‹æ–°ç”Ÿä»£çš„é»˜è®¤åƒåœ¾æ”¶é›†å™¨ã€‚</p><h4 id="Parallel-Scavengeæ”¶é›†å™¨">Parallel Scavengeæ”¶é›†å™¨</h4><p>Parallel Scavengeæ”¶é›†å™¨ä¹Ÿæ˜¯ä¸€ä¸ªæ–°ç”Ÿä»£åƒåœ¾æ”¶é›†å™¨ï¼ŒåŒæ ·ä½¿ç”¨å¤åˆ¶ç®—æ³•ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªå¤šçº¿ç¨‹çš„åƒåœ¾æ”¶é›†å™¨ï¼Œå®ƒé‡ç‚¹å…³æ³¨çš„æ˜¯ç¨‹åºè¾¾åˆ°ä¸€ä¸ªå¯æ§åˆ¶çš„ååé‡ï¼ˆThoughputï¼ŒCPUç”¨äºè¿è¡Œç”¨æˆ·ä»£ç çš„æ—¶é—´/CPUæ€»æ¶ˆè€—æ—¶é—´ï¼Œå³ååé‡=è¿è¡Œç”¨æˆ·ä»£ç æ—¶é—´/(è¿è¡Œç”¨æˆ·ä»£ç æ—¶é—´+åƒåœ¾æ”¶é›†æ—¶é—´)ï¼‰ï¼Œé«˜ååé‡å¯ä»¥æœ€é«˜æ•ˆç‡åœ°åˆ©ç”¨CPUæ—¶é—´ï¼Œå°½å¿«åœ°å®Œæˆç¨‹åºçš„è¿ç®—ä»»åŠ¡ï¼Œä¸»è¦é€‚ç”¨äºåœ¨åå°è¿ç®—è€Œä¸éœ€è¦å¤ªå¤šäº¤äº’çš„ä»»åŠ¡ã€‚è‡ªé€‚åº”è°ƒèŠ‚ç­–ç•¥ä¹Ÿæ˜¯ParallelScavengeæ”¶é›†å™¨ä¸ParNewæ”¶é›†å™¨çš„ä¸€ä¸ªé‡è¦åŒºåˆ«ã€‚</p><h4 id="Serial-Oldæ”¶é›†å™¨">Serial Oldæ”¶é›†å™¨</h4><p>Serial Oldæ˜¯Serialåƒåœ¾æ”¶é›†å™¨å¹´è€ä»£ç‰ˆæœ¬ï¼Œå®ƒåŒæ ·æ˜¯ä¸ªå•çº¿ç¨‹çš„æ”¶é›†å™¨ï¼Œä½¿ç”¨æ ‡è®°-æ•´ç†ç®—æ³•ï¼Œè¿™ä¸ªæ”¶é›†å™¨ä¹Ÿä¸»è¦æ˜¯è¿è¡Œåœ¨Clienté»˜è®¤çš„javaè™šæ‹Ÿæœºé»˜è®¤çš„å¹´è€ä»£åƒåœ¾æ”¶é›†å™¨ã€‚<br>ã€€ã€€åœ¨Serveræ¨¡å¼ä¸‹ï¼Œä¸»è¦æœ‰ä¸¤ä¸ªç”¨é€”ï¼š<br>ã€€ã€€1. åœ¨JDK1.5ä¹‹å‰ç‰ˆæœ¬ä¸­ä¸æ–°ç”Ÿä»£çš„Parallel Scavengeæ”¶é›†å™¨æ­é…ä½¿ç”¨ã€‚<br>ã€€ã€€2. ä½œä¸ºå¹´è€ä»£ä¸­ä½¿ç”¨CMSæ”¶é›†å™¨çš„åå¤‡åƒåœ¾æ”¶é›†æ–¹æ¡ˆã€‚</p><p>æ–°ç”Ÿä»£Serialä¸å¹´è€ä»£Serial Oldæ­é…åƒåœ¾æ”¶é›†è¿‡ç¨‹å›¾ï¼š<br><img src="/images/java/jvm/jvm7.bmp" alt=""></p><p>æ–°ç”Ÿä»£Parallel Scavengeæ”¶é›†å™¨ä¸ParNewæ”¶é›†å™¨å·¥ä½œåŸç†ç±»ä¼¼ï¼Œéƒ½æ˜¯å¤šçº¿ç¨‹çš„æ”¶é›†å™¨ï¼Œéƒ½ä½¿ç”¨çš„æ˜¯å¤åˆ¶ç®—æ³•ï¼Œåœ¨åƒåœ¾æ”¶é›†è¿‡ç¨‹ä¸­éƒ½éœ€è¦æš‚åœæ‰€æœ‰çš„å·¥ä½œçº¿ç¨‹ã€‚<br>ã€€ã€€æ–°ç”Ÿä»£Parallel Scavenge/ParNewä¸å¹´è€ä»£Serial Oldæ­é…åƒåœ¾æ”¶é›†è¿‡ç¨‹å›¾ï¼š<br><img src="/images/java/jvm/jvm8.bmp" alt=""></p><h4 id="Parallel-Oldæ”¶é›†å™¨">Parallel Oldæ”¶é›†å™¨</h4><p>Parallel Oldæ”¶é›†å™¨æ˜¯Parallel Scavengeçš„å¹´è€ä»£ç‰ˆæœ¬ï¼Œä½¿ç”¨å¤šçº¿ç¨‹çš„æ ‡è®°-æ•´ç†ç®—æ³•ï¼Œåœ¨JDK1.6æ‰å¼€å§‹æä¾›ã€‚<br>ã€€ã€€åœ¨JDK1.6ä¹‹å‰ï¼Œæ–°ç”Ÿä»£ä½¿ç”¨ParallelScavengeæ”¶é›†å™¨åªèƒ½æ­é…å¹´è€ä»£çš„Serial Oldæ”¶é›†å™¨ï¼Œåªèƒ½ä¿è¯æ–°ç”Ÿä»£çš„ååé‡ä¼˜å…ˆï¼Œæ— æ³•ä¿è¯æ•´ä½“çš„ååé‡ï¼ŒParallel Oldæ­£æ˜¯ä¸ºäº†åœ¨å¹´è€ä»£åŒæ ·æä¾›ååé‡ä¼˜å…ˆçš„åƒåœ¾æ”¶é›†å™¨ï¼Œå¦‚æœç³»ç»Ÿå¯¹ååé‡è¦æ±‚æ¯”è¾ƒé«˜ï¼Œå¯ä»¥ä¼˜å…ˆè€ƒè™‘æ–°ç”Ÿä»£Parallel Scavengeå’Œå¹´è€ä»£Parallel Oldæ”¶é›†å™¨çš„æ­é…ç­–ç•¥ã€‚<br>ã€€ã€€æ–°ç”Ÿä»£Parallel Scavengeå’Œå¹´è€ä»£Parallel Oldæ”¶é›†å™¨æ­é…è¿è¡Œè¿‡ç¨‹å›¾ï¼š<br><img src="/images/java/jvm/jvm9.bmp" alt=""></p><h4 id="CMSæ”¶é›†å™¨">CMSæ”¶é›†å™¨</h4><p>Concurrent mark sweep(CMS)æ”¶é›†å™¨æ˜¯ä¸€ç§å¹´è€ä»£åƒåœ¾æ”¶é›†å™¨ï¼Œå…¶æœ€ä¸»è¦ç›®æ ‡æ˜¯è·å–æœ€çŸ­åƒåœ¾å›æ”¶åœé¡¿æ—¶é—´ï¼Œå’Œå…¶ä»–å¹´è€ä»£ä½¿ç”¨æ ‡è®°-æ•´ç†ç®—æ³•ä¸åŒï¼Œå®ƒä½¿ç”¨å¤šçº¿ç¨‹çš„æ ‡è®°-æ¸…é™¤ç®—æ³•ã€‚ æœ€çŸ­çš„åƒåœ¾æ”¶é›†åœé¡¿æ—¶é—´å¯ä»¥ä¸ºäº¤äº’æ¯”è¾ƒé«˜çš„ç¨‹åºæé«˜ç”¨æˆ·ä½“éªŒã€‚<br>ã€€ã€€CMSå·¥ä½œæœºåˆ¶ç›¸æ¯”å…¶ä»–çš„åƒåœ¾æ”¶é›†å™¨æ¥è¯´æ›´å¤æ‚ï¼Œæ•´ä¸ªè¿‡ç¨‹åˆ†ä¸ºä»¥ä¸‹4ä¸ªé˜¶æ®µï¼š<br>ã€€ã€€1. åˆå§‹æ ‡è®°ï¼šåªæ˜¯æ ‡è®°ä¸€ä¸‹GC Rootsèƒ½ç›´æ¥å…³è”çš„å¯¹è±¡ï¼Œé€Ÿåº¦å¾ˆå¿«ï¼Œä»ç„¶éœ€è¦æš‚åœæ‰€æœ‰çš„å·¥ä½œçº¿ç¨‹ã€‚<br>ã€€ã€€2. å¹¶å‘æ ‡è®°ï¼šè¿›è¡ŒGC Rootsè·Ÿè¸ªçš„è¿‡ç¨‹ï¼Œå’Œç”¨æˆ·çº¿ç¨‹ä¸€èµ·å·¥ä½œï¼Œä¸éœ€è¦æš‚åœå·¥ä½œçº¿ç¨‹ã€‚<br>ã€€ã€€3. é‡æ–°æ ‡è®°ï¼šä¸ºäº†ä¿®æ­£åœ¨å¹¶å‘æ ‡è®°æœŸé—´ï¼Œå› ç”¨æˆ·ç¨‹åºç»§ç»­è¿è¡Œè€Œå¯¼è‡´æ ‡è®°äº§ç”Ÿå˜åŠ¨çš„é‚£ä¸€éƒ¨åˆ†å¯¹è±¡çš„æ ‡è®°è®°å½•ï¼Œä»ç„¶éœ€è¦æš‚åœæ‰€æœ‰çš„å·¥ä½œçº¿ç¨‹ã€‚<br>ã€€ã€€4. å¹¶å‘æ¸…é™¤ï¼šæ¸…é™¤GC Rootsä¸å¯è¾¾å¯¹è±¡ï¼Œå’Œç”¨æˆ·çº¿ç¨‹ä¸€èµ·å·¥ä½œï¼Œä¸éœ€è¦æš‚åœå·¥ä½œçº¿ç¨‹ã€‚ç”±äºè€—æ—¶æœ€é•¿çš„å¹¶å‘æ ‡è®°å’Œå¹¶å‘æ¸…é™¤è¿‡ç¨‹ä¸­ï¼Œåƒåœ¾æ”¶é›†çº¿ç¨‹å¯ä»¥å’Œç”¨æˆ·ç°åœ¨ä¸€èµ·å¹¶å‘å·¥ä½œï¼Œæ‰€ä»¥æ€»ä½“ä¸Šæ¥çœ‹CMSæ”¶é›†å™¨çš„å†…å­˜å›æ”¶å’Œç”¨æˆ·çº¿ç¨‹æ˜¯ä¸€èµ·å¹¶å‘åœ°æ‰§è¡Œã€‚<br>ã€€ã€€CMSæ”¶é›†å™¨å·¥ä½œè¿‡ç¨‹ï¼š<br><img src="/images/java/jvm/jvm10.bmp" alt=""></p><h4 id="G1æ”¶é›†å™¨">G1æ”¶é›†å™¨</h4><p>Garbage firståƒåœ¾æ”¶é›†å™¨æ˜¯ç›®å‰åƒåœ¾æ”¶é›†å™¨ç†è®ºå‘å±•çš„æœ€å‰æ²¿æˆæœï¼Œç›¸æ¯”ä¸CMSæ”¶é›†å™¨ï¼ŒG1æ”¶é›†å™¨ä¸¤ä¸ªæœ€çªå‡ºçš„æ”¹è¿›æ˜¯ï¼š<br>ã€€ã€€1. åŸºäºæ ‡è®°-æ•´ç†ç®—æ³•ï¼Œä¸äº§ç”Ÿå†…å­˜ç¢ç‰‡ã€‚<br>ã€€ã€€2. å¯ä»¥éå¸¸ç²¾ç¡®æ§åˆ¶åœé¡¿æ—¶é—´ï¼Œåœ¨ä¸ç‰ºç‰²ååé‡å‰æä¸‹ï¼Œå®ç°ä½åœé¡¿åƒåœ¾å›æ”¶ã€‚ G1æ”¶é›†å™¨é¿å…å…¨åŒºåŸŸåƒåœ¾æ”¶é›†ï¼Œå®ƒæŠŠå †å†…å­˜åˆ’åˆ†ä¸ºå¤§å°å›ºå®šçš„å‡ ä¸ªç‹¬ç«‹åŒºåŸŸï¼Œå¹¶ä¸”è·Ÿè¸ªè¿™äº›åŒºåŸŸçš„åƒåœ¾æ”¶é›†è¿›åº¦ï¼ŒåŒæ—¶åœ¨åå°ç»´æŠ¤ä¸€ä¸ªä¼˜å…ˆçº§åˆ—è¡¨ï¼Œæ¯æ¬¡æ ¹æ®æ‰€å…è®¸çš„æ”¶é›†æ—¶é—´ï¼Œä¼˜å…ˆå›æ”¶åƒåœ¾æœ€å¤šçš„åŒºåŸŸã€‚åŒºåŸŸåˆ’åˆ†å’Œä¼˜å…ˆçº§åŒºåŸŸå›æ”¶æœºåˆ¶ï¼Œç¡®ä¿G1æ”¶é›†å™¨å¯ä»¥åœ¨æœ‰é™æ—¶é—´è·å¾—æœ€é«˜çš„åƒåœ¾æ”¶é›†æ•ˆç‡ã€‚</p><p>å‚è€ƒèµ„æ–™ï¼šJavaæ¶æ„å¸ˆçŸ¥è¯†ç‚¹æ•´ç†</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;Javaä¸­éƒ½æœ‰å“ªäº›å¼•ç”¨ç±»å‹&quot;&gt;Javaä¸­éƒ½æœ‰å“ªäº›å¼•ç”¨ç±»å‹&lt;/h3&gt;
&lt;p&gt;Javaä¸­æœ‰å››ç§å¼•ç”¨ç±»å‹ï¼šå¼ºå¼•ç”¨ã€è½¯å¼•ç”¨ã€å¼±å¼•ç”¨ã€è™šå¼•ç”¨&lt;/p&gt;
&lt;h4 id=&quot;å¼ºå¼•ç”¨&quot;&gt;å¼ºå¼•ç”¨&lt;/h4&gt;
&lt;p&gt;åœ¨Javaä¸­æœ€å¸¸è§çš„å°±æ˜¯å¼ºå¼•ç”¨ï¼ŒæŠŠä¸€ä¸ªå¯¹è±¡èµ‹ç»™ä¸€ä¸ªå¼•ç”¨å˜é‡ï¼Œè¿™ä¸ªå¼•ç”¨å˜é‡å°±
      
    
    </summary>
    
      <category term="JVM" scheme="http://yoursite.com/blog/categories/JVM/"/>
    
    
      <category term="Javaç¯‡" scheme="http://yoursite.com/blog/tags/Java%E7%AF%87/"/>
    
  </entry>
  
  <entry>
    <title>ä¸ºä»€ä¹ˆé‡å†™equalsè¿˜è¦é‡å†™hashcode</title>
    <link href="http://yoursite.com/blog/2019/04/11/%E4%B8%BA%E4%BB%80%E4%B9%88%E9%87%8D%E5%86%99equals%E8%BF%98%E8%A6%81%E9%87%8D%E5%86%99hashcode/"/>
    <id>http://yoursite.com/blog/2019/04/11/ä¸ºä»€ä¹ˆé‡å†™equalsè¿˜è¦é‡å†™hashcode/</id>
    <published>2019-04-11T00:38:22.000Z</published>
    <updated>2019-05-15T15:10:44.219Z</updated>
    
    <content type="html"><![CDATA[<h3 id="ä¸ºä»€ä¹ˆé‡å†™equalsè¿˜è¦é‡å†™hashcode">ä¸ºä»€ä¹ˆé‡å†™equalsè¿˜è¦é‡å†™hashcode</h3><p>é€šè¿‡Studentç±»ä¸¾ä¾‹è¯´æ˜</p><a id="more"></a><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">public class Student {</span><br><span class="line">    private String name;</span><br><span class="line">    private Integer age;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    public Student(String name, Integer age) {</span><br><span class="line">        super();</span><br><span class="line">        this.name = name;</span><br><span class="line">        this.age = age;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public boolean equals(Object obj) {</span><br><span class="line">        // TODO Auto-generated method stub</span><br><span class="line"></span><br><span class="line">        if (obj == null) {</span><br><span class="line">            return false;</span><br><span class="line">        }</span><br><span class="line">        if (obj == this) {</span><br><span class="line">            return true;</span><br><span class="line">        }</span><br><span class="line">        if (obj.getClass() != this.getClass()) {</span><br><span class="line">            return false;</span><br><span class="line">        }</span><br><span class="line">        Student student = (Student) obj;</span><br><span class="line">        if (name.equals(student.name) &amp;&amp; age == student.age) {</span><br><span class="line">            return true;</span><br><span class="line">        }</span><br><span class="line">        return false;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) {</span><br><span class="line">        // TODO Auto-generated method stub</span><br><span class="line">        Student student = new Student("Tom", 10);</span><br><span class="line">        HashMap&lt;Object, Object&gt; hashMap = new HashMap&lt;&gt;();</span><br><span class="line">        hashMap.put(student, "X001");</span><br><span class="line">        System.out.println(hashMap.get(new Student("Tom", 10)));</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>åœ¨Studentç±»ä¸­ï¼Œé‡å†™äº†equalsæ–¹æ³•ï¼Œé€šè¿‡nameå’Œageåˆ¤æ–­æ˜¯å¦ä¸ºåŒä¸€äººã€‚<br>ç„¶ååœ¨å°†studentå¯¹è±¡ä½œä¸ºkeyæ”¾å…¥hashmapä¸­ï¼Œè¿™æ—¶å°†å­¦å·ä½œä¸ºvalueå­˜å…¥ã€‚<br>å†è°ƒç”¨hashmapçš„getæ–¹æ³•é€šè¿‡keyå»å¯»æ‰¾value,æ ¹æ®equalsæ–¹æ³•åˆ¤æ–­åº”ä¸ºç›¸åŒå¹¶ä¸”è¾“å‡º"X001"<br>ä½†å®é™…ä¸Šè¾“å‡ºä¸ºnull<br><img src="/images/java/javase/equals.bmp" alt=""></p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">public V get(Object key) {</span><br><span class="line">       Node&lt;K,V&gt; e;</span><br><span class="line">       return (e = getNode(hash(key), key)) == null ? null : e.value;</span><br><span class="line">   }</span><br><span class="line"></span><br><span class="line"> /**</span><br><span class="line">    * Implements Map.get and related methods.</span><br><span class="line">    *</span><br><span class="line">    * @param hash hash for key</span><br><span class="line">    * @param key the key</span><br><span class="line">    * @return the node, or null if none</span><br><span class="line">    */</span><br><span class="line">   final Node&lt;K,V&gt; getNode(int hash, Object key) {</span><br><span class="line">       Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; first, e; int n; K k;</span><br><span class="line">       if ((tab = table) != null &amp;&amp; (n = tab.length) &gt; 0 &amp;&amp;</span><br><span class="line">           (first = tab[(n - 1) &amp; hash]) != null) {</span><br><span class="line">           if (first.hash == hash &amp;&amp; // always check first node</span><br><span class="line">               ((k = first.key) == key || (key != null &amp;&amp; key.equals(k))))</span><br><span class="line">               return first;</span><br><span class="line">           if ((e = first.next) != null) {</span><br><span class="line">               if (first instanceof TreeNode)</span><br><span class="line">                   return ((TreeNode&lt;K,V&gt;)first).getTreeNode(hash, key);</span><br><span class="line">               do {</span><br><span class="line">                   if (e.hash == hash &amp;&amp;</span><br><span class="line">                       ((k = e.key) == key || (key != null &amp;&amp; key.equals(k))))</span><br><span class="line">                       return e;</span><br><span class="line">               } while ((e = e.next) != null);</span><br><span class="line">           }</span><br><span class="line">       }</span><br><span class="line">       return null;</span><br><span class="line">   }</span><br></pre></td></tr></tbody></table></figure><p>é€šè¿‡HashMapçš„æºç å¯ä»¥å‘ç°æ˜¯å…ˆé€šè¿‡æ¯”è¾ƒhashå€¼ï¼Œå½“hashå€¼ä¸ç›¸ç­‰æ—¶ï¼Œè¿”å›å€¼ä¸ºnull</p><p>åŠ ä¸Šé‡å†™hashcodeæ–¹æ³•</p><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">@Override</span><br><span class="line">   public int hashCode() {</span><br><span class="line">       // TODO Auto-generated method stub</span><br><span class="line">       final int temp = 31;</span><br><span class="line">       int result = 1;</span><br><span class="line">       result = temp * result + ((name == null) ? 0 : name.hashCode());</span><br><span class="line">       result = temp * result + age;</span><br><span class="line">       return result;</span><br><span class="line">   }</span><br></pre></td></tr></tbody></table></figure><p><img src="/images/java/javase/equals2.bmp" alt=""><br>è¿™æ—¶æ­£å¸¸è¾“å‡ºX001</p><p>æ ¹æ® Java è§„èŒƒï¼Œä½¿ç”¨ equal() æ–¹æ³•æ¥åˆ¤æ–­ä¸¤ä¸ªç›¸ç­‰çš„å¯¹è±¡ï¼Œå¿…é¡»å…·æœ‰ç›¸åŒçš„ hashcodeã€‚</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;ä¸ºä»€ä¹ˆé‡å†™equalsè¿˜è¦é‡å†™hashcode&quot;&gt;ä¸ºä»€ä¹ˆé‡å†™equalsè¿˜è¦é‡å†™hashcode&lt;/h3&gt;
&lt;p&gt;é€šè¿‡Studentç±»ä¸¾ä¾‹è¯´æ˜&lt;/p&gt;
    
    </summary>
    
      <category term="Javaé¢˜é›†" scheme="http://yoursite.com/blog/categories/Java%E9%A2%98%E9%9B%86/"/>
    
    
      <category term="Javaç¯‡" scheme="http://yoursite.com/blog/tags/Java%E7%AF%87/"/>
    
  </entry>
  
  <entry>
    <title>SpringBootå­¦ä¹ ï¼ˆ3ï¼‰</title>
    <link href="http://yoursite.com/blog/2019/04/10/SpringBoot%E5%AD%A6%E4%B9%A0%20%20(3)/"/>
    <id>http://yoursite.com/blog/2019/04/10/SpringBootå­¦ä¹   (3)/</id>
    <published>2019-04-10T12:44:18.000Z</published>
    <updated>2019-10-23T15:25:42.423Z</updated>
    
    <content type="html"><![CDATA[<h3 id="SpringBootæ•´åˆFilter">SpringBootæ•´åˆFilter</h3><a id="more"></a><filter>  <filter-name>FirstFilter</filter-name>  <filter-class>com.serendipity.filter.FirstFilter</filter-class></filter><filter-mapping>   <filter-name>FirstFilter</filter-name>   <url-pattern>/first </url-pattern></filter-mapping><!-- more -->#### é€šè¿‡åœ¨æ·»åŠ @WebFilteræ³¨è§£<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">@WebFilter(filterName="FirstFilter",urlPatterns="/first")</span><br><span class="line">public class FirstFilter implements Filter {</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain)</span><br><span class="line">            throws IOException, ServletException {</span><br><span class="line">        // TODO Auto-generated method stub</span><br><span class="line">        System.out.println("è¿›å…¥Filter");</span><br><span class="line">        chain.doFilter(request, response);</span><br><span class="line">        System.out.println("ç¦»å¼€Filter");</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h4 id="é€šè¿‡æ–¹æ³•å®ŒæˆFilterç»„ä»¶æ³¨å†Œ">é€šè¿‡æ–¹æ³•å®ŒæˆFilterç»„ä»¶æ³¨å†Œ</h4><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public FilterRegistrationBean&lt;Filter&gt; getFilterRegistrationBean(){</span><br><span class="line">      FilterRegistrationBean&lt;Filter&gt; bean = new FilterRegistrationBean&lt;Filter&gt;(new SecondFilter());</span><br><span class="line">      //bean.addUrlPatterns(new String[] {"*.do","*.jsp"});</span><br><span class="line">      bean.addUrlPatterns("/first");</span><br><span class="line">      return bean;</span><br><span class="line">  }</span><br></pre></td></tr></tbody></table></figure><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;SpringBootæ•´åˆFilter&quot;&gt;SpringBootæ•´åˆFilter&lt;/h3&gt;
    
    </summary>
    
      <category term="SpringBoot" scheme="http://yoursite.com/blog/categories/SpringBoot/"/>
    
    
      <category term="SpringBoot" scheme="http://yoursite.com/blog/tags/SpringBoot/"/>
    
  </entry>
  
</feed>
